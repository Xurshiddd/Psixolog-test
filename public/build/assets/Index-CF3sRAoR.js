import{d as H,r as x,c as l,a as n,u as r,h as K,w as d,b as e,e as S,v as Q,o,F as f,f as p,t as a,g as T,i as c,j as P,l as $,k as j,n as Y,m as U}from"./app-DOhVdoN8.js";import{_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-BbG04CYJ.js";import{_ as M,a as V,b as B,c as E,d as z}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BuAVI8Dy.js";import{_ as R}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-D8TISAX9.js";import{_ as h}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DF8t7Vlr.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-BouGe3Q8.js";import"./createLucideIcon-B-BGo4CG.js";import"./useForwardPropsEmits-BCF2wzBt.js";import"./VisuallyHidden-CeZakV8k.js";import"./index-BbqGKNiK.js";import"./useForwardExpose-DyqayvAp.js";import"./index-8hKDQZPy.js";const W={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-2 sm:p-4"},Z={class:"rounded-md border bg-card text-card-foreground shadow-sm p-4"},ee={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},te=["value"],se=["value"],oe={class:"flex items-end gap-2"},le={class:"flex flex-col md:flex-row gap-2 mt-4 pt-4 border-t"},ie={class:"hidden md:block rounded-md border bg-card text-card-foreground shadow-sm"},ae={class:"relative w-full overflow-auto"},re={class:"w-full caption-bottom text-sm"},ne={class:"[&_tr:last-child]:border-0"},de={class:"p-4 align-middle [&:has([role=checkbox])]:pr-0"},ue={key:0,class:"w-10 h-10 rounded-full overflow-hidden bg-gray-100"},ce=["src","alt"],me={key:1,class:"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-sm font-semibold text-indigo-600"},fe={class:"p-4 align-middle [&:has([role=checkbox])]:pr-0 font-medium"},pe={class:"p-4 align-middle [&:has([role=checkbox])]:pr-0"},ge={class:"p-4 align-middle [&:has([role=checkbox])]:pr-0"},he={class:"p-4 align-middle [&:has([role=checkbox])]:pr-0"},be={key:0},xe={key:1,class:"text-muted-foreground"},_e={class:"p-4 align-middle [&:has([role=checkbox])]:pr-0"},ve={key:0},ye={key:1,class:"text-muted-foreground"},ke={class:"p-4 align-middle [&:has([role=checkbox])]:pr-0"},we={class:"p-4 align-middle [&:has([role=checkbox])]:pr-0"},Se={class:"grid gap-4 py-4 max-h-[60vh] overflow-y-auto"},je={class:"font-semibold mb-2"},Te={class:"text-sm text-muted-foreground whitespace-pre-wrap"},$e={class:"text-sm text-muted-foreground whitespace-pre-wrap"},Ce={key:1,class:"text-muted-foreground text-sm"},Le={class:"p-4 align-middle [&:has([role=checkbox])]:pr-0"},De={key:0},Fe={class:"md:hidden space-y-4"},Pe={class:"space-y-3"},Ue={class:"flex items-start justify-between gap-3"},Me={class:"flex items-start gap-3 flex-1"},Ve={key:0,class:"w-12 h-12 rounded-full overflow-hidden bg-gray-100 flex-shrink-0"},Be=["src","alt"],Ee={key:1,class:"w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center text-base font-semibold text-indigo-600 flex-shrink-0"},ze={class:"font-semibold text-base"},Re={class:"text-sm text-muted-foreground"},Ie={class:"grid grid-cols-2 gap-2 text-sm"},Oe={class:"font-medium"},Xe={class:"font-medium"},Ae={key:0},Ne={key:1},qe={class:"font-medium"},Ge={key:0},He={key:1},Ke={class:"font-medium"},Qe={key:0,class:"pt-2 border-t"},Ye={class:"grid gap-4 py-4 max-h-[60vh] overflow-y-auto"},Je={class:"font-semibold mb-2"},We={class:"text-sm text-muted-foreground whitespace-pre-wrap"},Ze={key:0,class:"rounded-lg border bg-card p-8 text-center text-muted-foreground"},et={key:0,class:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4"},tt={class:"text-sm text-muted-foreground"},st={class:"flex flex-wrap items-center justify-center gap-1"},gt=H({__name:"Index",props:{students:{},groups:{},specialities:{},filters:{}},setup(m){const g=m,I=[{title:"Talabalar",href:"/admin/students"}],O=x(null),_=x(g.filters.search||""),v=x(g.filters.group_id||null),y=x(g.filters.speciality_id||null),k=x(g.filters.test_status||null),C=u=>new Date(u).toLocaleDateString(),L=u=>{O.value=u},b=()=>({search:_.value,group_id:v.value,speciality_id:y.value,test_status:k.value}),X=()=>{const u=b();U.get("/admin/students",u)},A=()=>{_.value="",v.value=null,y.value=null,k.value=null,U.get("/admin/students")},N=u=>{if(!u)return null;const t=new URL(u),s=b();return Object.entries(s).forEach(([i,w])=>{w&&t.searchParams.set(i,String(w))}),t.toString()},q=()=>{const u=new URLSearchParams;Object.entries(b()).forEach(([s,i])=>{i&&u.append(s,String(i))});const t=u.toString();window.location.href=`/admin/students/export/excel${t?"?"+t:""}`},G=()=>{const u=new URLSearchParams;Object.entries(b()).forEach(([s,i])=>{i&&u.append(s,String(i))});const t=u.toString();window.location.href=`/admin/students/export/pdf${t?"?"+t:""}`},D=u=>{const t=b(),s=new URLSearchParams;Object.entries(t).forEach(([w,F])=>{F&&s.append(w,String(F))}),g.students.current_page>1&&s.append("page",String(g.students.current_page));const i=s.toString();return`/admin/students/${u}${i?"?"+i:""}`};return(u,t)=>(o(),l(f,null,[n(r(K),{title:"Talabalar"}),n(J,{breadcrumbs:I},{default:d(()=>[e("div",W,[t[29]||(t[29]=e("div",{class:"flex items-center justify-between"},[e("h1",{class:"text-xl sm:text-2xl font-bold tracking-tight"},"Talabalar")],-1)),e("div",Z,[e("div",ee,[e("div",null,[t[4]||(t[4]=e("label",{for:"search-filter",class:"block text-sm font-medium mb-2"}," Qidirish (Login yoki Ism) ",-1)),S(e("input",{id:"search-filter","onUpdate:modelValue":t[0]||(t[0]=s=>_.value=s),type:"text",placeholder:"Login yoki ism kiriting...",class:"w-full px-3 py-2 border border-input rounded-md bg-background text-sm"},null,512),[[Q,_.value]])]),e("div",null,[t[6]||(t[6]=e("label",{for:"group-filter",class:"block text-sm font-medium mb-2"}," Guruh ",-1)),S(e("select",{id:"group-filter","onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s),class:"w-full px-3 py-2 border border-input rounded-md bg-background text-sm"},[t[5]||(t[5]=e("option",{value:"",selected:""},"Barchasi",-1)),(o(!0),l(f,null,p(m.groups,s=>(o(),l("option",{key:s.id,value:s.id},a(s.name),9,te))),128))],512),[[T,v.value]])]),e("div",null,[t[8]||(t[8]=e("label",{for:"speciality-filter",class:"block text-sm font-medium mb-2"}," Mutaxassislik ",-1)),S(e("select",{id:"speciality-filter","onUpdate:modelValue":t[2]||(t[2]=s=>y.value=s),class:"w-full px-3 py-2 border border-input rounded-md bg-background text-sm"},[t[7]||(t[7]=e("option",{value:"",selected:""},"Barchasi",-1)),(o(!0),l(f,null,p(m.specialities,s=>(o(),l("option",{key:s.id,value:s.id},a(s.name),9,se))),128))],512),[[T,y.value]])]),e("div",null,[t[10]||(t[10]=e("label",{for:"test-status-filter",class:"block text-sm font-medium mb-2"}," Test Statusi ",-1)),S(e("select",{id:"test-status-filter","onUpdate:modelValue":t[3]||(t[3]=s=>k.value=s),class:"w-full px-3 py-2 border border-input rounded-md bg-background text-sm"},[...t[9]||(t[9]=[e("option",{value:"",selected:""},"Barchasi",-1),e("option",{value:"submitted"},"Topshirgan",-1),e("option",{value:"not_submitted"},"Topshirmagan",-1)])],512),[[T,k.value]])]),e("div",oe,[n(r(h),{onClick:X,class:"flex-1"},{default:d(()=>[...t[11]||(t[11]=[c(" Filterlash ",-1)])]),_:1}),n(r(h),{onClick:A,variant:"outline",class:"flex-1"},{default:d(()=>[...t[12]||(t[12]=[c(" Tozalash ",-1)])]),_:1})])]),e("div",le,[n(r(h),{onClick:q,variant:"outline",class:"flex-1"},{default:d(()=>[...t[13]||(t[13]=[c(" ðŸ“Š Excel'ga yuklash ",-1)])]),_:1}),n(r(h),{onClick:G,variant:"outline",class:"flex-1"},{default:d(()=>[...t[14]||(t[14]=[c(" ðŸ“„ PDF'ga yuklash ",-1)])]),_:1})])]),e("div",ie,[e("div",ae,[e("table",re,[t[21]||(t[21]=e("thead",{class:"[&_tr]:border-b"},[e("tr",{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"}," Rasm "),e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"}," Ism Familiya "),e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"}," Login "),e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"}," Telefon "),e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"}," Guruh "),e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"}," Yo'nalish "),e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"}," Ro'yxatdan o'tgan sana "),e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"}," Xulosalar "),e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0"}," Amallar ")])],-1)),e("tbody",ne,[(o(!0),l(f,null,p(m.students.data,s=>(o(),l("tr",{key:s.id,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[e("td",de,[s.picture?(o(),l("div",ue,[e("img",{src:`${s.picture}`,alt:s.name,class:"w-full h-full object-cover"},null,8,ce)])):(o(),l("div",me,a(s.name.charAt(0).toUpperCase()),1))]),e("td",fe,a(s.name),1),e("td",pe,a(s.login),1),e("td",ge,a(s.phone),1),e("td",he,[s.group?(o(),l("span",be,a(s.group.name),1)):(o(),l("span",xe,"-"))]),e("td",_e,[s.speciality?(o(),l("span",ve,a(s.speciality.name),1)):(o(),l("span",ye,"-"))]),e("td",ke,a(C(s.created_at)),1),e("td",we,[s.users_tests_results&&s.users_tests_results.length>0?(o(),P(r(M),{key:0},{default:d(()=>[n(r(R),{"as-child":""},{default:d(()=>[n(r(h),{variant:"outline",size:"sm",onClick:i=>L(s)},{default:d(()=>[...t[15]||(t[15]=[c(" Xulosa ",-1)])]),_:1},8,["onClick"])]),_:2},1024),n(r(V),{class:"sm:max-w-[425px]"},{default:d(()=>[n(r(B),null,{default:d(()=>[n(r(E),null,{default:d(()=>[c("Diagnostika Xulosalari - "+a(s.name),1)]),_:2},1024),n(r(z),null,{default:d(()=>[...t[16]||(t[16]=[c(" Talaba uchun yozilgan barcha diagnostika xulosalari. ",-1)])]),_:1})]),_:2},1024),e("div",Se,[(o(!0),l(f,null,p(s.users_tests_results,i=>(o(),l("div",{key:i.id,class:"border-b pb-4 last:border-0 last:pb-0"},[e("h4",je,"Modul ID: "+a(i.pivot.module_id),1),e("div",null,[t[17]||(t[17]=e("h5",null,"Psiholog hulosasi",-1)),e("p",Te,a(i.pivot.diagnosis),1),t[18]||(t[18]=e("h5",null,"Avtomatik hulosa",-1)),e("p",$e,a(i.pivot.result_real),1)])]))),128))])]),_:2},1024)]),_:2},1024)):(o(),l("span",Ce,"-"))]),e("td",Le,[n(r($),{href:D(s.id),class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-9 px-4 py-2"},{default:d(()=>[...t[19]||(t[19]=[c(" Ko'rish ",-1)])]),_:1},8,["href"])])]))),128)),m.students.data.length===0?(o(),l("tr",De,[...t[20]||(t[20]=[e("td",{colspan:"9",class:"p-4 align-middle text-center"}," Talabalar topilmadi. ",-1)])])):j("",!0)])])])]),e("div",Fe,[(o(!0),l(f,null,p(m.students.data,s=>(o(),l("div",{key:s.id,class:"rounded-lg border bg-card text-card-foreground shadow-sm p-4"},[e("div",Pe,[e("div",Ue,[e("div",Me,[s.picture?(o(),l("div",Ve,[e("img",{src:`/storage/${s.picture}`,alt:s.name,class:"w-full h-full object-cover"},null,8,Be)])):(o(),l("div",Ee,a(s.name.charAt(0).toUpperCase()),1)),e("div",null,[e("h3",ze,a(s.name),1),e("p",Re,a(s.login),1)])]),n(r($),{href:D(s.id),class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-9 px-3 py-2"},{default:d(()=>[...t[22]||(t[22]=[c(" Ko'rish ",-1)])]),_:1},8,["href"])]),e("div",Ie,[e("div",null,[t[23]||(t[23]=e("span",{class:"text-muted-foreground"},"Telefon:",-1)),e("p",Oe,a(s.phone),1)]),e("div",null,[t[24]||(t[24]=e("span",{class:"text-muted-foreground"},"Guruh:",-1)),e("p",Xe,[s.group?(o(),l("span",Ae,a(s.group.name),1)):(o(),l("span",Ne,"-"))])]),e("div",null,[t[25]||(t[25]=e("span",{class:"text-muted-foreground"},"Yo'nalish:",-1)),e("p",qe,[s.speciality?(o(),l("span",Ge,a(s.speciality.name),1)):(o(),l("span",He,"-"))])]),e("div",null,[t[26]||(t[26]=e("span",{class:"text-muted-foreground"},"Sana:",-1)),e("p",Ke,a(C(s.created_at)),1)])]),s.users_tests_results&&s.users_tests_results.length>0?(o(),l("div",Qe,[n(r(M),null,{default:d(()=>[n(r(R),{"as-child":""},{default:d(()=>[n(r(h),{variant:"outline",size:"sm",class:"w-full",onClick:i=>L(s)},{default:d(()=>[...t[27]||(t[27]=[c(" Xulosalarni ko'rish ",-1)])]),_:1},8,["onClick"])]),_:2},1024),n(r(V),{class:"sm:max-w-[425px]"},{default:d(()=>[n(r(B),null,{default:d(()=>[n(r(E),null,{default:d(()=>[c("Diagnostika Xulosalari - "+a(s.name),1)]),_:2},1024),n(r(z),null,{default:d(()=>[...t[28]||(t[28]=[c(" Talaba uchun yozilgan barcha diagnostika xulosalari. ",-1)])]),_:1})]),_:2},1024),e("div",Ye,[(o(!0),l(f,null,p(s.users_tests_results,i=>(o(),l("div",{key:i.id,class:"border-b pb-4 last:border-0 last:pb-0"},[e("h4",Je,"Modul ID: "+a(i.pivot.module_id),1),e("p",We,a(i.pivot.diagnosis??i.pivot.result_real),1)]))),128))])]),_:2},1024)]),_:2},1024)])):j("",!0)])]))),128)),m.students.data.length===0?(o(),l("div",Ze," Talabalar topilmadi. ")):j("",!0)]),m.students.last_page>1?(o(),l("div",et,[e("div",tt," Jami: "+a(m.students.total)+" ta talaba ",1),e("div",st,[(o(!0),l(f,null,p(m.students.links,(s,i)=>(o(),P(r($),{key:i,href:N(s.url)||"#",class:Y(["inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","h-9 px-3 py-2",s.active?"bg-primary text-primary-foreground hover:bg-primary/90":"border border-input bg-background hover:bg-accent hover:text-accent-foreground",s.url?"":"opacity-50 cursor-not-allowed"]),disabled:!s.url,innerHTML:s.label},null,8,["href","class","disabled","innerHTML"]))),128))])])):j("",!0)])]),_:1})],64))}});export{gt as default};
