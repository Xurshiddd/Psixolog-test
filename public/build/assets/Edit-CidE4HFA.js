import{d as $,r as m,c as o,a as _,u as w,h as N,w as j,b as t,t as i,q,i as p,e as f,n as v,v as k,o as r,k as d,F as h,f as V,g as M,m as T}from"./app-d_SLbATm.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-CXU4kjK5.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-tjHStAc5.js";import"./createLucideIcon-Br_0eut1.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Di_IR-JN.js";import"./useForwardPropsEmits-5Fs5DwpC.js";import"./VisuallyHidden-DE7HSwfI.js";import"./index-DOJenu8j.js";import"./useForwardExpose-Bv2uQHJ9.js";import"./index-8hKDQZPy.js";const E={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},F={class:"mt-1 text-sm text-slate-600 dark:text-slate-400"},O={class:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm p-6 max-w-2xl"},D={key:0,class:"mt-1 text-sm text-red-500"},K=["value"],Q={key:0,class:"mt-1 text-sm text-red-500"},A={for:"value",class:"block text-sm font-medium text-slate-900 dark:text-slate-100 mb-2"},L={key:0,class:"text-xs font-normal text-slate-500 dark:text-slate-400"},R={value:null,disabled:""},Y=["value"],G={key:0,class:"mt-1 text-sm text-red-500"},H={key:1,class:"mt-1 text-sm text-amber-500"},J={key:0,class:"mt-1 text-sm text-red-500"},P={key:0,class:"mt-1 text-sm text-red-500"},W={class:"flex gap-3 pt-4"},X=["disabled"],Z={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-4 mr-2 animate-spin"},ue=$({__name:"Edit",props:{category:{},modules:{}},setup(b){const n=b,C=[{title:"Result Categories",href:"/result-categories"},{title:"Tahrirlash",href:`/result-categories/${n.category.id}/edit`}],S=m(typeof document<"u"&&document.referrer||"/result-categories"),l=m({name:n.category.name,diagnostic:n.category.diagnostic||"",fake_diagnostic:n.category.fake_diagnostic||"",value:n.category.value,module_id:n.category.module_id}),s=m({}),u=m(!1),c=m([]),x=m(!1),y=async g=>{if(!g){c.value=[];return}x.value=!0;try{const a=await(await fetch(`/api/modules/${g}/test-options`)).json();c.value=a}catch(e){console.error("Error fetching test options:",e),c.value=[]}finally{x.value=!1}},B=()=>{l.value.module_id?y(l.value.module_id):l.value.value=null};(async()=>l.value.module_id&&await y(l.value.module_id))();const U=()=>{u.value=!0,s.value={},T.put(`/result-categories/${n.category.id}`,l.value,{onError:g=>{s.value=g,u.value=!1},onFinish:()=>{u.value=!1}})};return(g,e)=>(r(),o(h,null,[_(w(N),{title:`${b.category.name} - Tahrirlash`},null,8,["title"]),_(z,{breadcrumbs:C},{default:j(()=>[t("div",E,[t("div",null,[e[6]||(e[6]=t("h1",{class:"text-2xl font-bold text-slate-900 dark:text-slate-100"}," Kategoriyani Tahrirlash ",-1)),t("p",F,i(b.category.name)+" kategoriyasini tahrirlang ",1)]),t("div",O,[t("form",{onSubmit:q(U,["prevent"]),class:"space-y-6"},[t("div",null,[e[7]||(e[7]=t("label",{for:"name",class:"block text-sm font-medium text-slate-900 dark:text-slate-100 mb-2"},[p(" Kategoriya Nomi "),t("span",{class:"text-red-500"},"*")],-1)),f(t("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=a=>l.value.name=a),type:"text",placeholder:"Masalan: A-grumli, B-normal",class:v(["w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":s.value.name}])},null,2),[[k,l.value.name]]),s.value.name?(r(),o("p",D,i(s.value.name),1)):d("",!0)]),t("div",null,[e[9]||(e[9]=t("label",{for:"module",class:"block text-sm font-medium text-slate-900 dark:text-slate-100 mb-2"},[p(" Modul "),t("span",{class:"text-red-500"},"*")],-1)),f(t("select",{id:"module","onUpdate:modelValue":e[1]||(e[1]=a=>l.value.module_id=a),onChange:B,class:v(["w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":s.value.module_id}]),disabled:""},[e[8]||(e[8]=t("option",{value:null,disabled:""},"Modulni tanlang",-1)),(r(!0),o(h,null,V(b.modules,a=>(r(),o("option",{key:a.id,value:a.id},i(a.name),9,K))),128))],34),[[M,l.value.module_id,void 0,{number:!0}]]),s.value.module_id?(r(),o("p",Q,i(s.value.module_id),1)):d("",!0)]),t("div",null,[t("label",A,[e[10]||(e[10]=p(" Qiymat ",-1)),l.value.module_id?(r(),o("span",L,"(test variantlaridan)")):d("",!0)]),f(t("select",{id:"value","onUpdate:modelValue":e[2]||(e[2]=a=>l.value.value=a),disabled:"",class:v(["w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",{"border-red-500":s.value.value}])},[t("option",R,i(x.value?"Yuklashda...":"Qiymatni tanlang"),1),(r(!0),o(h,null,V(c.value,a=>(r(),o("option",{key:a,value:a},i(a),9,Y))),128))],2),[[M,l.value.value,void 0,{number:!0}]]),s.value.value?(r(),o("p",G,i(s.value.value),1)):d("",!0),l.value.module_id&&c.value.length===0&&!x.value?(r(),o("p",H," Ushbu modulda test variantlari topilmadi ")):d("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{for:"diagnostic",class:"block text-sm font-medium text-slate-900 dark:text-slate-100 mb-2"}," Tashxis ",-1)),f(t("textarea",{id:"diagnostic","onUpdate:modelValue":e[3]||(e[3]=a=>l.value.diagnostic=a),rows:"4",placeholder:"Bu kategoriyaning tashxisini kiriting",class:v(["w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":s.value.diagnostic}])},null,2),[[k,l.value.diagnostic]]),s.value.diagnostic?(r(),o("p",J,i(s.value.diagnostic),1)):d("",!0)]),t("div",null,[e[12]||(e[12]=t("label",{for:"fake_diagnostic",class:"block text-sm font-medium text-slate-900 dark:text-slate-100 mb-2"}," Soxta Tashxis ",-1)),f(t("textarea",{id:"fake_diagnostic","onUpdate:modelValue":e[4]||(e[4]=a=>l.value.fake_diagnostic=a),rows:"4",placeholder:"Soxta tashxisni kiriting",class:v(["w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":s.value.fake_diagnostic}])},null,2),[[k,l.value.fake_diagnostic]]),s.value.fake_diagnostic?(r(),o("p",P,i(s.value.fake_diagnostic),1)):d("",!0)]),t("div",W,[t("button",{type:"submit",disabled:u.value,class:"inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-600 dark:hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[u.value?(r(),o("svg",Z,[...e[13]||(e[13]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.995-1.465"},null,-1)])])):d("",!0),p(" "+i(u.value?"Saqlashda...":"Saqlash"),1)],8,X),t("button",{type:"button",onClick:e[5]||(e[5]=a=>w(T).visit(S.value,{preserveState:!0})),class:"inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2 dark:focus:ring-offset-slate-900 transition-colors"}," Bekor qilish ")])],32)])])]),_:1})],64))}});export{ue as default};
