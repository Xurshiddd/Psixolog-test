import{d as B,H as $,c as n,a as y,w as q,b as e,i as h,e as u,v as c,I as F,o as d,k as v,F as w,f as _,t as C,q as H,r as f,m as O}from"./app-DOhVdoN8.js";import{_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-BbG04CYJ.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-BouGe3Q8.js";import"./createLucideIcon-B-BGo4CG.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DF8t7Vlr.js";import"./useForwardPropsEmits-BCF2wzBt.js";import"./VisuallyHidden-CeZakV8k.js";import"./index-BbqGKNiK.js";import"./useForwardExpose-DyqayvAp.js";import"./index-8hKDQZPy.js";const N={class:"min-h-screen bg-slate-50 dark:bg-slate-900"},Y={class:"mx-auto max-w-5xl px-4 py-10 sm:px-6 lg:px-8"},z={class:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm"},Q={class:"px-6 py-6"},A={class:"grid grid-cols-1 gap-6"},D={class:"grid grid-cols-1 gap-4 sm:grid-cols-[1fr_auto] sm:items-end"},E={class:"flex items-center gap-3 sm:justify-end"},J={class:"mt-6 rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm"},G={class:"flex flex-col gap-4 px-6 py-5 sm:flex-row sm:items-center sm:justify-between border-b border-slate-100 dark:border-slate-700"},K={class:"flex flex-wrap gap-2"},W={class:"divide-y divide-slate-100"},X={key:0,class:"px-6 py-12 text-center"},Z={class:"flex items-start justify-between gap-4 mb-4"},ee={class:"flex-1"},te={class:"flex items-center gap-2 mb-2"},se={class:"text-sm font-medium text-slate-600 dark:text-slate-300"},le={class:"flex items-center gap-2"},oe=["onClick"],ae={class:"mb-4"},re=["onUpdate:modelValue"],ie={class:"mb-4"},ne={class:"flex items-center gap-3"},de=["onChange"],ue=["onClick"],ce={key:0,class:"mt-3"},be=["src"],me={key:0,class:"mt-6"},xe={class:"mb-4 flex items-center justify-between"},pe=["onClick"],ve={class:"space-y-3"},fe={class:"flex-1"},ge=["onUpdate:modelValue"],ke={class:"w-24"},he=["onUpdate:modelValue"],we=["onClick"],Re=B({__name:"TestBuild",setup(ye){const V=[{title:"Testlar",href:"/test/index"},{title:"Test Yaratish",href:"/test/create"}],b=f(!1),m=f(""),x=f(""),r=f([]);let j=1,g=1;const k=o=>{const t={id:j++,type:o,text:"",required:!0,reverseScoring:!1,options:o!=="text"?[{id:g++,label:"",value:1},{id:g++,label:"",value:1}]:[],imageFile:null,imagePreview:null};r.value.push(t)},U=o=>{const t=r.value.find(l=>l.id===o);if(t&&t.imagePreview)try{URL.revokeObjectURL(t.imagePreview)}catch{}r.value=r.value.filter(l=>l.id!==o)},T=(o,t)=>{const l=t.target,s=l.files&&l.files[0]?l.files[0]:null,i=r.value.find(a=>a.id===o);if(i){if(i.imagePreview)try{URL.revokeObjectURL(i.imagePreview)}catch{}s?(i.imageFile=s,i.imagePreview=URL.createObjectURL(s)):(i.imageFile=null,i.imagePreview=null),l&&(l.value="")}},M=o=>{const t=r.value.find(l=>l.id===o);if(t){if(t.imagePreview)try{URL.revokeObjectURL(t.imagePreview)}catch{}t.imageFile=null,t.imagePreview=null}},P=o=>{const t=r.value.find(l=>l.id===o);t&&t.options.push({id:g++,label:"",value:1})},L=(o,t)=>{const l=r.value.find(s=>s.id===o);l&&(l.options=l.options.filter(s=>s.id!==t))},S=o=>({single:"Single",multi:"Multi",text:"Text"})[o],R=async()=>{const o={shuffle:b.value,module:m.value,module_description:x.value,questions:r.value.map(t=>({question:t.text,question_image:t.imageFile,type:t.type,options:t.options.map(l=>({option_text:l.label,option_value:l.value}))}))};O.post("/test/store",o,{onSuccess:()=>{alert("Test muvaffaqiyatli saqlandi!"),r.value=[],m.value="",x.value="",b.value=!1},onError:t=>{console.log(t),alert("Validatsiya xatosi bor")}})};return(o,t)=>{const l=$("Head");return d(),n(w,null,[y(l,{title:"Test Yaratish"}),y(I,{breadcrumbs:V},{default:q(()=>[e("div",N,[e("div",Y,[t[18]||(t[18]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-semibold tracking-tight text-slate-900 dark:text-slate-100"}," Test Yaratish "),e("p",{class:"mt-1 text-sm text-slate-600 dark:text-slate-400"}," Yangi xulq-atvor bahosini yarating ")],-1)),e("div",z,[t[9]||(t[9]=e("div",{class:"flex items-center gap-3 border-b border-slate-100 dark:border-slate-700 px-6 py-5"},[e("div",{class:"flex h-9 w-9 items-center justify-center rounded-xl bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200","aria-hidden":"true"},[e("svg",{viewBox:"0 0 24 24",fill:"none",class:"h-5 w-5",stroke:"currentColor","stroke-width":"1.8"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.607 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})])]),e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},"Test malumotlari")],-1)),e("div",Q,[e("div",A,[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},[h(" Module nomi "),e("span",{class:"text-rose-600"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),type:"text",placeholder:"Strees darajasini baholash",class:"mt-2 block w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-3 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none ring-0 transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,512),[[c,m.value]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Tavsif",-1)),u(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>x.value=s),rows:"4",placeholder:"Test haqida qisqacha ma'lumot",class:"mt-2 block w-full resize-none rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-3 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,512),[[c,x.value]])]),e("div",D,[e("label",E,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=s=>b.value=s),class:"h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500/20"},null,512),[[F,b.value]]),t[8]||(t[8]=e("span",{class:"text-sm text-slate-700 dark:text-slate-300"},"Aralashtirish",-1))])])])])]),e("div",J,[e("div",G,[t[10]||(t[10]=e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},"Savollar",-1)),e("div",K,[e("button",{onClick:t[3]||(t[3]=s=>k("single")),type:"button",class:"rounded-xl bg-blue-600 px-3.5 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-600/20"}," + Single "),e("button",{onClick:t[4]||(t[4]=s=>k("multi")),type:"button",class:"rounded-xl bg-blue-600 px-3.5 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-600/20"}," + Multi "),e("button",{onClick:t[5]||(t[5]=s=>k("text")),type:"button",class:"rounded-xl bg-blue-600 px-3.5 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-600/20"}," + Text ")])]),e("div",W,[r.value.length===0?(d(),n("div",X,[...t[11]||(t[11]=[e("p",{class:"text-slate-500 dark:text-slate-400"},"Hali savollar qo'shilmagan. Yuqoridagi tugmalar orqali savollarni qo'shing",-1)])])):v("",!0),(d(!0),n(w,null,_(r.value,(s,i)=>(d(),n("div",{key:s.id,class:"px-6 py-6"},[e("div",Z,[e("div",ee,[e("div",te,[e("span",se,"Savol "+C(i+1)+" ("+C(S(s.type))+")",1)])]),e("div",le,[e("button",{onClick:a=>U(s.id),type:"button",class:"rounded p-1 text-red-600 hover:bg-red-50 transition"},[...t[12]||(t[12]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,oe)])]),e("div",ae,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2 dark:text-slate-300"},[h("Savol matni "),e("span",{class:"text-rose-600"},"*")],-1)),u(e("input",{"onUpdate:modelValue":a=>s.text=a,type:"text",placeholder:"Savol matnini kiriting",class:"block w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-3 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,8,re),[[c,s.text]])]),e("div",ie,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2 dark:text-slate-300"},"Rasm (ixtiyoriy)",-1)),e("div",ne,[e("input",{onChange:a=>T(s.id,a),type:"file",accept:"image/*",class:"text-sm text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-700 rounded-xl px-3 py-2 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,40,de),s.imagePreview?(d(),n("button",{key:0,onClick:H(a=>M(s.id),["prevent"]),type:"button",class:"text-sm text-red-600 hover:underline transition border border-slate-200 dark:border-slate-700 rounded-xl px-3 py-2 bg-transparent"}," Rasmni olib tashlash ",8,ue)):v("",!0)]),s.imagePreview?(d(),n("div",ce,[e("img",{src:s.imagePreview,alt:"preview",class:"max-w-xs rounded-lg border border-slate-200 dark:border-slate-700"},null,8,be)])):v("",!0)]),s.type!=="text"?(d(),n("div",me,[e("div",xe,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Variantlar",-1)),e("button",{onClick:a=>P(s.id),type:"button",class:"text-sm font-medium text-blue-600 hover:text-blue-700 transition"}," + Variant ",8,pe)]),e("div",ve,[(d(!0),n(w,null,_(s.options,a=>(d(),n("div",{key:a.id,class:"flex items-end gap-3"},[e("div",fe,[u(e("input",{"onUpdate:modelValue":p=>a.label=p,type:"text",placeholder:"Variant",class:"block w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,8,ge),[[c,a.label]])]),e("div",ke,[u(e("input",{"onUpdate:modelValue":p=>a.value=p,type:"number",min:"1",placeholder:"1",class:"block w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,8,he),[[c,a.value,void 0,{number:!0}]])]),e("button",{onClick:p=>L(s.id,a.id),type:"button",class:"rounded p-2 text-red-600 hover:bg-red-50 transition"},[...t[16]||(t[16]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,we)]))),128))])])):v("",!0)]))),128))])]),e("div",{class:"mt-8 flex justify-end"},[e("button",{onClick:R,type:"button",class:"inline-flex items-center justify-center gap-2 rounded-2xl bg-emerald-600 px-6 py-4 text-base font-semibold text-white shadow-sm transition hover:bg-emerald-700 focus:outline-none focus:ring-4 focus:ring-emerald-600/20"},[...t[17]||(t[17]=[e("svg",{viewBox:"0 0 24 24",fill:"none",class:"h-5 w-5",stroke:"currentColor","stroke-width":"1.8"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7a2 2 0 012-2h10l4 4v10a2 2 0 01-2 2H6a2 2 0 01-2-2V7z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 5v6h8V5"})],-1),h(" Saqlash ",-1)])])])])])]),_:1})],64)}}});export{Re as default};
