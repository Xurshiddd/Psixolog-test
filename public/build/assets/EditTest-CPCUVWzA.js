import{d as L,i as p,q as R,e as $,w as B,b as t,t as h,f as w,m as u,v as c,s as F,o as i,c as n,g as x,F as y,r as _,k as I,p as O}from"./app-DjGn33rp.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-CE1c0S7t.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-DLnrtvcs.js";import"./createLucideIcon-BW66ZMyM.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-u3i2PwQ8.js";import"./useForwardPropsEmits-CcQ-V9Hl.js";import"./VisuallyHidden-DF5yv1na.js";import"./index-B9maUJ0k.js";import"./useForwardExpose-CryXUNSm.js";import"./index-B0R16HDv.js";const D={class:"min-h-screen bg-slate-50 dark:bg-slate-900"},H={class:"mx-auto max-w-5xl px-4 py-10 sm:px-6 lg:px-8"},N={class:"mb-8"},Q={class:"mt-1 text-sm text-slate-600 dark:text-slate-400"},A={class:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm"},E={class:"px-6 py-6"},J={class:"grid grid-cols-1 gap-6"},Y={class:"grid grid-cols-1 gap-4 sm:grid-cols-[1fr_auto] sm:items-end"},G={class:"flex items-center gap-3 sm:justify-end"},K={class:"mt-6 rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm"},W={class:"flex flex-col gap-4 px-6 py-5 sm:flex-row sm:items-center sm:justify-between border-b border-slate-100 dark:border-slate-700"},X={class:"flex flex-wrap gap-2"},Z={class:"divide-y divide-slate-100"},ee={key:0,class:"px-6 py-12 text-center"},te={class:"flex items-start justify-between gap-4 mb-4"},se={class:"flex-1"},le={class:"flex items-center gap-2 mb-2"},oe={class:"text-sm font-medium text-slate-600 dark:text-slate-300"},ae={class:"flex items-center gap-2"},re=["onClick"],ie={class:"mb-4"},ne=["onUpdate:modelValue"],de={class:"mb-4"},ue={class:"flex items-center gap-3"},ce=["onChange"],me=["onClick"],be={key:0,class:"mt-3"},pe=["src"],xe={key:0,class:"mt-6"},ge={class:"mb-4 flex items-center justify-between"},ve=["onClick"],fe={class:"space-y-3"},ke={class:"flex-1"},he=["onUpdate:modelValue"],we={class:"w-24"},ye=["onUpdate:modelValue"],_e=["onClick"],Re=L({__name:"EditTest",props:{module:{}},setup(C){const d=C,V=[{title:"Testlar",href:"/test/index"},{title:"Testni Tahrirlash",href:"#"}],g=p(!!d.module.shuffle),m=p(d.module.name),v=p(d.module.description||""),r=p([]);R(()=>{d.module.tests&&(r.value=d.module.tests.map(l=>({id:l.id,type:l.type,text:l.question,required:!0,reverseScoring:!1,options:l.options?l.options.map(e=>({id:e.id,label:e.option_text,value:e.option_value})):[],imageFile:null,imagePreview:l.image?"/storage/"+l.image:null,existingImage:l.image})))});const f=l=>{const e={type:l,text:"",required:!0,reverseScoring:!1,options:l!=="text"?[{label:"",value:1},{label:"",value:1}]:[],imageFile:null,imagePreview:null};r.value.push(e)},j=l=>{const e=r.value[l];if(e&&e.imagePreview&&!e.existingImage)try{URL.revokeObjectURL(e.imagePreview)}catch{}r.value.splice(l,1)},U=(l,e)=>{const s=e.target,a=s.files&&s.files[0]?s.files[0]:null,o=r.value[l];if(o){if(o.imagePreview&&!o.existingImage)try{URL.revokeObjectURL(o.imagePreview)}catch{}a&&(o.imageFile=a,o.imagePreview=URL.createObjectURL(a)),s&&(s.value="")}},T=l=>{const e=r.value[l];if(e){if(e.imagePreview&&!e.existingImage)try{URL.revokeObjectURL(e.imagePreview)}catch{}e.imageFile=null,e.imagePreview=null,e.existingImage=null}},M=l=>{const e=r.value[l];e&&e.options.push({label:"",value:1})},P=(l,e)=>{const s=r.value[l];s&&s.options.splice(e,1)},S=l=>({single:"Single",multi:"Multi",text:"Text"})[l],q=async()=>{const l=r.value.map(s=>({id:s.id,question:s.text,question_image:s.imageFile,type:s.type,options:s.options.map(a=>({id:a.id,option_text:a.label,option_value:a.value}))})),e={id:d.module.id,module:m.value,module_description:v.value,shuffle:g.value?1:0,questions:l};O.put(`/test/update/${d.module.id}`,e,{onSuccess:()=>{alert("Test muvaffaqiyatli yangilandi!")},onError:s=>{console.log(s),alert("Validatsiya xatosi bor")}})};return(l,e)=>(i(),$(z,{breadcrumbs:V},{default:B(()=>[t("div",D,[t("div",H,[t("div",N,[e[6]||(e[6]=t("h1",{class:"text-3xl font-semibold tracking-tight text-slate-900 dark:text-slate-100"}," Testni Tahrirlash ",-1)),t("p",Q,h(m.value)+" testini o'zgartirish ",1)]),t("div",A,[e[10]||(e[10]=t("div",{class:"flex items-center gap-3 border-b border-slate-100 dark:border-slate-700 px-6 py-5"},[t("div",{class:"flex h-9 w-9 items-center justify-center rounded-xl bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200","aria-hidden":"true"},[t("svg",{viewBox:"0 0 24 24",fill:"none",class:"h-5 w-5",stroke:"currentColor","stroke-width":"1.8"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.607 2.296.07 2.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})])]),t("h2",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},"Test malumotlari")],-1)),t("div",E,[t("div",J,[t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},[w(" Module nomi "),t("span",{class:"text-rose-600"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),type:"text",placeholder:"Strees darajasini baholash",class:"mt-2 block w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-3 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none ring-0 transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,512),[[c,m.value]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Tavsif",-1)),u(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=s=>v.value=s),rows:"4",placeholder:"Test haqida qisqacha ma'lumot",class:"mt-2 block w-full resize-none rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-3 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,512),[[c,v.value]])]),t("div",Y,[t("label",G,[u(t("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=s=>g.value=s),class:"h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500/20"},null,512),[[F,g.value]]),e[9]||(e[9]=t("span",{class:"text-sm text-slate-700 dark:text-slate-300"},"Aralashtirish",-1))])])])])]),t("div",K,[t("div",W,[e[11]||(e[11]=t("h2",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},"Savollar",-1)),t("div",X,[t("button",{onClick:e[3]||(e[3]=s=>f("single")),type:"button",class:"rounded-xl bg-blue-600 px-3.5 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-600/20"}," + Single "),t("button",{onClick:e[4]||(e[4]=s=>f("multi")),type:"button",class:"rounded-xl bg-blue-600 px-3.5 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-600/20"}," + Multi "),t("button",{onClick:e[5]||(e[5]=s=>f("text")),type:"button",class:"rounded-xl bg-blue-600 px-3.5 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-600/20"}," + Text ")])]),t("div",Z,[r.value.length===0?(i(),n("div",ee,[...e[12]||(e[12]=[t("p",{class:"text-slate-500 dark:text-slate-400"},"Hali savollar qo'shilmagan. Yuqoridagi tugmalar orqali savollarni qo'shing",-1)])])):x("",!0),(i(!0),n(y,null,_(r.value,(s,a)=>(i(),n("div",{key:a,class:"px-6 py-6"},[t("div",te,[t("div",se,[t("div",le,[t("span",oe,"Savol "+h(a+1)+" ("+h(S(s.type))+")",1)])]),t("div",ae,[t("button",{onClick:o=>j(a),type:"button",class:"rounded p-1 text-red-600 hover:bg-red-50 transition"},[...e[13]||(e[13]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,re)])]),t("div",ie,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2 dark:text-slate-300"},[w("Savol matni "),t("span",{class:"text-rose-600"},"*")],-1)),u(t("input",{"onUpdate:modelValue":o=>s.text=o,type:"text",placeholder:"Savol matnini kiriting",class:"block w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-3 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,8,ne),[[c,s.text]])]),t("div",de,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2 dark:text-slate-300"},"Rasm (ixtiyoriy)",-1)),t("div",ue,[t("input",{onChange:o=>U(a,o),type:"file",accept:"image/*",class:"text-sm text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-700 rounded-xl px-3 py-2 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,40,ce),s.imagePreview?(i(),n("button",{key:0,onClick:I(o=>T(a),["prevent"]),type:"button",class:"text-sm text-red-600 hover:underline transition border border-slate-200 dark:border-slate-700 rounded-xl px-3 py-2 bg-transparent"}," Rasmni olib tashlash ",8,me)):x("",!0)]),s.imagePreview?(i(),n("div",be,[t("img",{src:s.imagePreview,alt:"preview",class:"max-w-xs rounded-lg border border-slate-200 dark:border-slate-700"},null,8,pe)])):x("",!0)]),s.type!=="text"?(i(),n("div",xe,[t("div",ge,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Variantlar",-1)),t("button",{onClick:o=>M(a),type:"button",class:"text-sm font-medium text-blue-600 hover:text-blue-700 transition"}," + Variant ",8,ve)]),t("div",fe,[(i(!0),n(y,null,_(s.options,(o,k)=>(i(),n("div",{key:k,class:"flex items-end gap-3"},[t("div",ke,[u(t("input",{"onUpdate:modelValue":b=>o.label=b,type:"text",placeholder:"Variant",class:"block w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,8,he),[[c,o.label]])]),t("div",we,[u(t("input",{"onUpdate:modelValue":b=>o.value=b,type:"number",min:"1",placeholder:"1",class:"block w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,8,ye),[[c,o.value,void 0,{number:!0}]])]),t("button",{onClick:b=>P(a,k),type:"button",class:"rounded p-2 text-red-600 hover:bg-red-50 transition"},[...e[17]||(e[17]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,_e)]))),128))])])):x("",!0)]))),128))])]),t("div",{class:"mt-8 flex justify-end"},[t("button",{onClick:q,type:"button",class:"inline-flex items-center justify-center gap-2 rounded-2xl bg-emerald-600 px-6 py-4 text-base font-semibold text-white shadow-sm transition hover:bg-emerald-700 focus:outline-none focus:ring-4 focus:ring-emerald-600/20"},[...e[18]||(e[18]=[t("svg",{viewBox:"0 0 24 24",fill:"none",class:"h-5 w-5",stroke:"currentColor","stroke-width":"1.8"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7a2 2 0 012-2h10l4 4v10a2 2 0 01-2 2H6a2 2 0 01-2-2V7z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 5v6h8V5"})],-1),w(" Saqlash ",-1)])])])])])]),_:1}))}});export{Re as default};
