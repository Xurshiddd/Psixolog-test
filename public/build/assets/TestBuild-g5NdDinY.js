import{d as S,e as R,w as B,b as e,f as k,m as u,v as c,s as $,o as i,c as n,g as p,F as h,r as w,t as y,k as F,i as v,p as q}from"./app-DRuDWrLP.js";import{_ as O}from"./AppLayout.vue_vue_type_script_setup_true_lang-DqJpgNL1.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-ZkdcgugZ.js";import"./createLucideIcon-CK20d-Ld.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BWMuJWvO.js";import"./useForwardPropsEmits-CEO7KvmN.js";import"./VisuallyHidden-BLrvkZsY.js";import"./index-Cv8D-Bac.js";import"./useForwardExpose-C13p0H4i.js";import"./index-B0R16HDv.js";const z={class:"min-h-screen bg-slate-50 dark:bg-slate-900"},H={class:"mx-auto max-w-5xl px-4 py-10 sm:px-6 lg:px-8"},I={class:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm"},N={class:"px-6 py-6"},Q={class:"grid grid-cols-1 gap-6"},Y={class:"grid grid-cols-1 gap-4 sm:grid-cols-[1fr_auto] sm:items-end"},A={class:"flex items-center gap-3 sm:justify-end"},D={class:"mt-6 rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm"},E={class:"flex flex-col gap-4 px-6 py-5 sm:flex-row sm:items-center sm:justify-between border-b border-slate-100 dark:border-slate-700"},J={class:"flex flex-wrap gap-2"},G={class:"divide-y divide-slate-100"},K={key:0,class:"px-6 py-12 text-center"},W={class:"flex items-start justify-between gap-4 mb-4"},X={class:"flex-1"},Z={class:"flex items-center gap-2 mb-2"},ee={class:"text-sm font-medium text-slate-600 dark:text-slate-300"},te={class:"flex items-center gap-2"},se=["onClick"],le={class:"mb-4"},oe=["onUpdate:modelValue"],ae={class:"mb-4"},re={class:"flex items-center gap-3"},ie=["onChange"],ne=["onClick"],de={key:0,class:"mt-3"},ue=["src"],ce={key:0,class:"mt-6"},be={class:"mb-4 flex items-center justify-between"},me=["onClick"],xe={class:"space-y-3"},pe={class:"flex-1"},ve=["onUpdate:modelValue"],fe={class:"w-24"},ge=["onUpdate:modelValue"],ke=["onClick"],Le=S({__name:"TestBuild",setup(he){const _=[{title:"Testlar",href:"/test/index"},{title:"Test Yaratish",href:"/test/create"}],b=v(!1),m=v(""),x=v(""),a=v([]);let C=1,f=1;const g=o=>{const t={id:C++,type:o,text:"",required:!0,reverseScoring:!1,options:o!=="text"?[{id:f++,label:"",value:1},{id:f++,label:"",value:1}]:[],imageFile:null,imagePreview:null};a.value.push(t)},V=o=>{const t=a.value.find(s=>s.id===o);if(t&&t.imagePreview)try{URL.revokeObjectURL(t.imagePreview)}catch{}a.value=a.value.filter(s=>s.id!==o)},j=(o,t)=>{const s=t.target,r=s.files&&s.files[0]?s.files[0]:null,l=a.value.find(d=>d.id===o);if(l){if(l.imagePreview)try{URL.revokeObjectURL(l.imagePreview)}catch{}r?(l.imageFile=r,l.imagePreview=URL.createObjectURL(r)):(l.imageFile=null,l.imagePreview=null),s&&(s.value="")}},U=o=>{const t=a.value.find(s=>s.id===o);if(t){if(t.imagePreview)try{URL.revokeObjectURL(t.imagePreview)}catch{}t.imageFile=null,t.imagePreview=null}},M=o=>{const t=a.value.find(s=>s.id===o);t&&t.options.push({id:f++,label:"",value:1})},T=(o,t)=>{const s=a.value.find(r=>r.id===o);s&&(s.options=s.options.filter(r=>r.id!==t))},P=o=>({single:"Single",multi:"Multi",text:"Text"})[o],L=async()=>{const o={shuffle:b.value,module:m.value,module_description:x.value,questions:a.value.map(t=>({question:t.text,question_image:t.imageFile,type:t.type,options:t.options.map(s=>({option_text:s.label,option_value:s.value}))}))};q.post("/test/store",o,{onSuccess:()=>{alert("Test muvaffaqiyatli saqlandi!"),a.value=[],m.value="",x.value="",b.value=!1},onError:t=>{console.log(t),alert("Validatsiya xatosi bor")}})};return(o,t)=>(i(),R(O,{breadcrumbs:_},{default:B(()=>[e("div",z,[e("div",H,[t[18]||(t[18]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-semibold tracking-tight text-slate-900 dark:text-slate-100"}," Test Yaratish "),e("p",{class:"mt-1 text-sm text-slate-600 dark:text-slate-400"}," Yangi xulq-atvor bahosini yarating ")],-1)),e("div",I,[t[9]||(t[9]=e("div",{class:"flex items-center gap-3 border-b border-slate-100 dark:border-slate-700 px-6 py-5"},[e("div",{class:"flex h-9 w-9 items-center justify-center rounded-xl bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200","aria-hidden":"true"},[e("svg",{viewBox:"0 0 24 24",fill:"none",class:"h-5 w-5",stroke:"currentColor","stroke-width":"1.8"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.607 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})])]),e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},"Test malumotlari")],-1)),e("div",N,[e("div",Q,[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},[k(" Module nomi "),e("span",{class:"text-rose-600"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),type:"text",placeholder:"Strees darajasini baholash",class:"mt-2 block w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-3 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none ring-0 transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,512),[[c,m.value]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Tavsif",-1)),u(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>x.value=s),rows:"4",placeholder:"Test haqida qisqacha ma'lumot",class:"mt-2 block w-full resize-none rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-3 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,512),[[c,x.value]])]),e("div",Y,[e("label",A,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=s=>b.value=s),class:"h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500/20"},null,512),[[$,b.value]]),t[8]||(t[8]=e("span",{class:"text-sm text-slate-700 dark:text-slate-300"},"Aralashtirish",-1))])])])])]),e("div",D,[e("div",E,[t[10]||(t[10]=e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},"Savollar",-1)),e("div",J,[e("button",{onClick:t[3]||(t[3]=s=>g("single")),type:"button",class:"rounded-xl bg-blue-600 px-3.5 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-600/20"}," + Single "),e("button",{onClick:t[4]||(t[4]=s=>g("multi")),type:"button",class:"rounded-xl bg-blue-600 px-3.5 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-600/20"}," + Multi "),e("button",{onClick:t[5]||(t[5]=s=>g("text")),type:"button",class:"rounded-xl bg-blue-600 px-3.5 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-600/20"}," + Text ")])]),e("div",G,[a.value.length===0?(i(),n("div",K,[...t[11]||(t[11]=[e("p",{class:"text-slate-500 dark:text-slate-400"},"Hali savollar qo'shilmagan. Yuqoridagi tugmalar orqali savollarni qo'shing",-1)])])):p("",!0),(i(!0),n(h,null,w(a.value,(s,r)=>(i(),n("div",{key:s.id,class:"px-6 py-6"},[e("div",W,[e("div",X,[e("div",Z,[e("span",ee,"Savol "+y(r+1)+" ("+y(P(s.type))+")",1)])]),e("div",te,[e("button",{onClick:l=>V(s.id),type:"button",class:"rounded p-1 text-red-600 hover:bg-red-50 transition"},[...t[12]||(t[12]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,se)])]),e("div",le,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2 dark:text-slate-300"},[k("Savol matni "),e("span",{class:"text-rose-600"},"*")],-1)),u(e("input",{"onUpdate:modelValue":l=>s.text=l,type:"text",placeholder:"Savol matnini kiriting",class:"block w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-3 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,8,oe),[[c,s.text]])]),e("div",ae,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2 dark:text-slate-300"},"Rasm (ixtiyoriy)",-1)),e("div",re,[e("input",{onChange:l=>j(s.id,l),type:"file",accept:"image/*",class:"text-sm text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-700 rounded-xl px-3 py-2 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,40,ie),s.imagePreview?(i(),n("button",{key:0,onClick:F(l=>U(s.id),["prevent"]),type:"button",class:"text-sm text-red-600 hover:underline transition border border-slate-200 dark:border-slate-700 rounded-xl px-3 py-2 bg-transparent"}," Rasmni olib tashlash ",8,ne)):p("",!0)]),s.imagePreview?(i(),n("div",de,[e("img",{src:s.imagePreview,alt:"preview",class:"max-w-xs rounded-lg border border-slate-200 dark:border-slate-700"},null,8,ue)])):p("",!0)]),s.type!=="text"?(i(),n("div",ce,[e("div",be,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Variantlar",-1)),e("button",{onClick:l=>M(s.id),type:"button",class:"text-sm font-medium text-blue-600 hover:text-blue-700 transition"}," + Variant ",8,me)]),e("div",xe,[(i(!0),n(h,null,w(s.options,l=>(i(),n("div",{key:l.id,class:"flex items-end gap-3"},[e("div",pe,[u(e("input",{"onUpdate:modelValue":d=>l.label=d,type:"text",placeholder:"Variant",class:"block w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,8,ve),[[c,l.label]])]),e("div",fe,[u(e("input",{"onUpdate:modelValue":d=>l.value=d,type:"number",min:"1",placeholder:"1",class:"block w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,8,ge),[[c,l.value,void 0,{number:!0}]])]),e("button",{onClick:d=>T(s.id,l.id),type:"button",class:"rounded p-2 text-red-600 hover:bg-red-50 transition"},[...t[16]||(t[16]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ke)]))),128))])])):p("",!0)]))),128))])]),e("div",{class:"mt-8 flex justify-end"},[e("button",{onClick:L,type:"button",class:"inline-flex items-center justify-center gap-2 rounded-2xl bg-emerald-600 px-6 py-4 text-base font-semibold text-white shadow-sm transition hover:bg-emerald-700 focus:outline-none focus:ring-4 focus:ring-emerald-600/20"},[...t[17]||(t[17]=[e("svg",{viewBox:"0 0 24 24",fill:"none",class:"h-5 w-5",stroke:"currentColor","stroke-width":"1.8"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7a2 2 0 012-2h10l4 4v10a2 2 0 01-2 2H6a2 2 0 01-2-2V7z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 5v6h8V5"})],-1),k(" Saqlash ",-1)])])])])])]),_:1}))}});export{Le as default};
