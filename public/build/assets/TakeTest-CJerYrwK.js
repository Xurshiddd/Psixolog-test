import{d as K,B as O,c as o,a as S,u as E,h as G,w as I,b as t,t as i,M as P,n as g,o as d,i as k,k as h,F as p,f as j,r as A,G as x,m as U,L as W}from"./app-d_SLbATm.js";import{_ as X}from"./AppStudentLayout.vue_vue_type_script_setup_true_lang-LxAyg0jc.js";import{d as Z,s as ee}from"./index-8hKDQZPy.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-tjHStAc5.js";import"./createLucideIcon-Br_0eut1.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Di_IR-JN.js";import"./useForwardPropsEmits-5Fs5DwpC.js";import"./VisuallyHidden-DE7HSwfI.js";import"./index-DOJenu8j.js";import"./useForwardExpose-Bv2uQHJ9.js";const te={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},le={class:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm p-6"},se={class:"flex items-start justify-between gap-4"},ae={class:"text-2xl font-bold text-slate-900 dark:text-slate-100"},re={class:"text-sm text-slate-500 dark:text-slate-400 mt-1"},oe={class:"text-right"},de={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},ie={class:"mt-4"},ne={class:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2"},ue={class:"mt-4 flex items-center justify-between gap-3"},ve={class:"text-xs text-slate-500 dark:text-slate-400"},be=["disabled"],ce={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},me={key:1,class:"w-5 h-5 animate-spin",viewBox:"0 0 24 24",fill:"none"},xe={key:0,class:"rounded-2xl border border-emerald-200 dark:border-emerald-800 bg-emerald-50 dark:bg-emerald-900/20 shadow-sm p-6"},ge={class:"flex items-start justify-between gap-4"},ke={key:0,class:"text-sm font-medium text-emerald-700 dark:text-emerald-300 mt-2"},he={key:1,class:"mt-4 p-4 rounded-xl bg-emerald-100/50 dark:bg-emerald-900/40 border border-emerald-200 dark:border-emerald-700"},fe={class:"text-emerald-800 dark:text-emerald-200 text-lg"},pe={key:0,class:"mt-4 space-y-3"},we={class:"flex items-start justify-between gap-3"},ye={class:"text-sm font-medium text-slate-900 dark:text-slate-100"},_e=["onClick"],Ce={class:"mt-2 text-sm text-slate-700 dark:text-slate-300"},je={class:"grid grid-cols-1 lg:grid-cols-4 gap-4"},Ae={class:"lg:col-span-1"},Me={class:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm p-4"},ze={key:0,class:"grid grid-cols-5 lg:grid-cols-4 gap-2"},Be=["onClick"],Te={key:1,class:"text-sm text-slate-500 dark:text-slate-400"},qe={class:"lg:col-span-3"},Se={key:0,class:"rounded-2xl border border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20 shadow-sm p-8 text-center"},$e={key:1,class:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm p-6"},Le={class:"mb-6"},Ne={class:"flex items-start gap-3"},Re={class:"flex-shrink-0 flex h-8 w-8 items-center justify-center rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 font-semibold"},Fe={class:"flex-1"},Qe={class:"text-xl font-semibold text-slate-900 dark:text-slate-100"},He={key:0,class:"mt-4"},Ve=["src","alt"],Ye={class:"mt-2"},Je={class:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300"},De={key:0,class:"space-y-3"},Ke=["onClick"],Oe={class:"flex items-center gap-3"},Ee={key:0,class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},Ge={class:"text-slate-900 dark:text-slate-100"},Ie={key:1,class:"space-y-3"},Pe=["onClick"],Ue={class:"flex items-center gap-3"},We={key:0,class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},Xe={class:"text-slate-900 dark:text-slate-100"},Ze={class:"text-xs text-slate-500 dark:text-slate-400"},et={class:"font-medium text-slate-700 dark:text-slate-200"},tt={key:2,class:"space-y-3"},lt=["value"],st={class:"text-xs text-slate-500 dark:text-slate-400"},at={key:3,class:"rounded-xl border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/20 p-4 text-sm text-amber-900 dark:text-amber-200"},rt={class:"flex items-center justify-between mt-8 pt-6 border-t border-slate-200 dark:border-slate-700"},ot=["disabled"],dt=["disabled"],it={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},nt={key:1,class:"w-5 h-5 animate-spin",viewBox:"0 0 24 24",fill:"none"},ut={key:2,class:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm p-12 text-center"},wt=K({__name:"TakeTest",props:{module:{},existingResult:{}},setup(v){const $=W(),L=[{title:"Student Dashboard",href:Z().url},{title:"Tests",href:ee().url},{title:v.module.name,href:"#"}],u=A(0),r=A({}),b=A(!1),w=A(!1),N=l=>{const e=[...l];for(let s=e.length-1;s>0;s--){const n=Math.floor(Math.random()*(s+1));[e[s],e[n]]=[e[n],e[s]]}return e},c=x(()=>{const l=v.module.tests||[];return v.module.shuffle?N(l):l}),m=x(()=>c.value.length),a=x(()=>c.value.length&&c.value[u.value]||null),M=x(()=>{let l=0;for(const e of c.value){const s=r.value[e.id];e.type==="single"?typeof s=="number"&&l++:e.type==="multi"?Array.isArray(s)&&s.length>0&&l++:e.type==="text"&&typeof s=="string"&&s.trim().length>0&&l++}return l}),R=x(()=>m.value?M.value/m.value*100:0),f=x(()=>$.props.flash||{}),z=x(()=>f.value.results??null);O(()=>f.value,l=>{(l?.status==="success"||l?.results)&&(w.value=!0)},{deep:!0,immediate:!0});const B=l=>{const e=r.value[l.id];return l.type==="single"?typeof e=="number":l.type==="multi"?Array.isArray(e)&&e.length>0:l.type==="text"?typeof e=="string"&&e.trim().length>0:!1},F=x(()=>a.value?B(a.value):!1),T=l=>{l.id in r.value||(l.type==="single"&&(r.value[l.id]=null),l.type==="multi"&&(r.value[l.id]=[]),l.type==="text"&&(r.value[l.id]=""))},y=l=>{if(l<0||l>=m.value)return;u.value=l;const e=c.value[l];e&&T(e)},Q=l=>l==="single"?"Faqat 1 ta tanlov":l==="multi"?"Bir nechta tanlov qilish mumkin":"Faqat matn yozish mumkin",H=()=>{u.value<m.value-1&&y(u.value+1)},V=()=>{u.value>0&&y(u.value-1)},Y=(l,e)=>{r.value[l]=e},J=(l,e)=>{const s=r.value[l],n=Array.isArray(s)?[...s]:[],C=n.indexOf(e);C>=0?n.splice(C,1):n.push(e),r.value[l]=n},D=(l,e)=>{r.value[l]=e},q=()=>{b.value=!0;const l={};for(const e of c.value)l[e.id]=r.value[e.id]??(e.type==="multi"?[]:null);U.post("/student/test/solve",{module_id:v.module.id,answers:l},{preserveScroll:!0,onFinish:()=>{b.value=!1}})},_=x(()=>m.value===0?!1:M.value===m.value);return c.value[0]&&T(c.value[0]),(l,e)=>(d(),o(p,null,[S(E(G),{title:`Test: ${v.module.name}`},null,8,["title"]),S(X,{breadcrumbs:L},{default:I(()=>[t("div",te,[t("div",le,[t("div",se,[t("div",null,[t("h2",ae,i(v.module.name),1),t("p",re," Savol "+i(m.value?u.value+1:0)+" / "+i(m.value),1)]),t("div",oe,[e[3]||(e[3]=t("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"Javob berilgan",-1)),t("p",de,i(M.value)+" / "+i(m.value),1)])]),t("div",ie,[t("div",ne,[t("div",{class:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:P({width:`${R.value}%`})},null,4)]),t("div",ue,[t("div",ve,i(F.value?"Bu savolga javob berilgan":"Hali javob berilmagan"),1),t("button",{onClick:q,disabled:b.value||!_.value,class:g(["inline-flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all",b.value||!_.value?"bg-emerald-600/70 text-white cursor-not-allowed":"bg-emerald-600 text-white hover:bg-emerald-700"])},[b.value?(d(),o("svg",me,[...e[5]||(e[5]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):(d(),o("svg",ce,[...e[4]||(e[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])),k(" "+i(b.value?"Yuborilmoqda...":"Testni yakunlash"),1)],10,be)])])]),w.value&&(z.value||f.value.status==="success"||v.existingResult)?(d(),o("div",xe,[t("div",ge,[t("div",null,[e[7]||(e[7]=t("h3",{class:"text-xl font-semibold text-emerald-900 dark:text-emerald-200"}," Natijalar: ",-1)),e[8]||(e[8]=t("p",{class:"text-sm text-emerald-800/70 dark:text-emerald-200/70 mt-1"}," Asosiy dianostika psiholog tomonidan amalga oshiriladi. ",-1)),f.value.message?(d(),o("div",ke,i(f.value.message),1)):h("",!0),v.existingResult?(d(),o("div",he,[e[6]||(e[6]=t("h4",{class:"text-lg font-bold text-emerald-900 dark:text-emerald-100 mb-2"},"Sizning Natijangiz:",-1)),t("p",fe,i(v.existingResult.result_fake),1)])):h("",!0)]),t("button",{class:"px-3 py-2 rounded-lg bg-white/70 dark:bg-slate-800 border border-emerald-200 dark:border-emerald-800 text-sm text-slate-700 dark:text-slate-200 hover:bg-white dark:hover:bg-slate-700 transition",onClick:e[0]||(e[0]=s=>w.value=!1)}," Yopish ")]),z.value?(d(),o("div",pe,[(d(!0),o(p,null,j(c.value,(s,n)=>(d(),o("div",{key:s.id,class:"rounded-xl border border-emerald-200 dark:border-emerald-800 bg-white dark:bg-slate-900/30 p-4"},[t("div",we,[t("div",ye,i(n+1)+". "+i(s.question),1),t("button",{class:"text-xs px-2 py-1 rounded-md border border-emerald-200 dark:border-emerald-800 text-emerald-700 dark:text-emerald-300 hover:bg-emerald-100/60 dark:hover:bg-emerald-900/30 transition",onClick:C=>y(n)}," Ko‘rish ",8,_e)]),t("div",Ce,i(z.value[s.id]?.consequence_fake??"Natija yo‘q"),1)]))),128))])):h("",!0)])):h("",!0),t("div",je,[t("div",Ae,[t("div",Me,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4"},"Savollar",-1)),v.existingResult?(d(),o("div",Te," Test yakunlangan. ")):(d(),o("div",ze,[(d(!0),o(p,null,j(c.value,(s,n)=>(d(),o("button",{key:s.id,onClick:C=>y(n),class:g(["aspect-square rounded-lg text-sm font-medium transition-all",{"bg-blue-600 text-white":u.value===n,"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400":u.value!==n&&B(s),"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300":u.value!==n&&!B(s)}])},i(n+1),11,Be))),128))]))])]),t("div",qe,[v.existingResult?(d(),o("div",Se,[e[11]||(e[11]=t("div",{class:"w-16 h-16 mx-auto bg-blue-100 dark:bg-blue-800 rounded-full flex items-center justify-center mb-4"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-8 h-8 text-blue-600 dark:text-blue-300"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e[12]||(e[12]=t("h2",{class:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2"},"Test Yakunlangan",-1)),e[13]||(e[13]=t("p",{class:"text-slate-600 dark:text-slate-400 mb-6"}," Siz ushbu testni muvaffaqiyatli yakunlagansiz. ",-1)),t("button",{onClick:e[1]||(e[1]=s=>w.value=!0),class:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-all shadow-md hover:shadow-lg"},[...e[10]||(e[10]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1),k(" Natijani ko‘rish ",-1)])])])):a.value?(d(),o("div",$e,[t("div",Le,[t("div",Ne,[t("span",Re,i(u.value+1),1),t("div",Fe,[t("h3",Qe,i(a.value.question),1),a.value.image?(d(),o("div",He,[t("img",{src:`/storage/${a.value.image}`,alt:a.value.question,class:"rounded-lg max-w-full h-auto border border-slate-200 dark:border-slate-700"},null,8,Ve)])):h("",!0),t("div",Ye,[t("span",Je," Tanlov: "+i(Q(a.value.type)),1)])])])]),a.value.type==="single"?(d(),o("div",De,[(d(!0),o(p,null,j(a.value.options||[],s=>(d(),o("button",{key:s.id,onClick:n=>Y(a.value.id,s.id),class:g(["w-full text-left p-4 rounded-xl border-2 transition-all",{"border-blue-600 bg-blue-50 dark:bg-blue-900/20":r.value[a.value.id]===s.id,"border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-700":r.value[a.value.id]!==s.id}])},[t("div",Oe,[t("div",{class:g(["flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center",{"border-blue-600 bg-blue-600":r.value[a.value.id]===s.id,"border-slate-300 dark:border-slate-600":r.value[a.value.id]!==s.id}])},[r.value[a.value.id]===s.id?(d(),o("svg",Ee,[...e[14]||(e[14]=[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):h("",!0)],2),t("span",Ge,i(s.option_text),1)])],10,Ke))),128))])):a.value.type==="multi"?(d(),o("div",Ie,[(d(!0),o(p,null,j(a.value.options||[],s=>(d(),o("button",{key:s.id,onClick:n=>J(a.value.id,s.id),class:g(["w-full text-left p-4 rounded-xl border-2 transition-all",{"border-blue-600 bg-blue-50 dark:bg-blue-900/20":Array.isArray(r.value[a.value.id])&&r.value[a.value.id].includes(s.id),"border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-700":!(Array.isArray(r.value[a.value.id])&&r.value[a.value.id].includes(s.id))}])},[t("div",Ue,[t("div",{class:g(["flex-shrink-0 w-6 h-6 rounded-md border-2 flex items-center justify-center",{"border-blue-600 bg-blue-600":Array.isArray(r.value[a.value.id])&&r.value[a.value.id].includes(s.id),"border-slate-300 dark:border-slate-600":!(Array.isArray(r.value[a.value.id])&&r.value[a.value.id].includes(s.id))}])},[Array.isArray(r.value[a.value.id])&&r.value[a.value.id].includes(s.id)?(d(),o("svg",We,[...e[15]||(e[15]=[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):h("",!0)],2),t("span",Xe,i(s.option_text),1)])],10,Pe))),128)),t("div",Ze,[e[16]||(e[16]=k(" Tanlanganlar: ",-1)),t("span",et,i(Array.isArray(r.value[a.value.id])?r.value[a.value.id].length:0),1)])])):a.value.type==="text"?(d(),o("div",tt,[e[17]||(e[17]=t("label",{class:"text-sm font-medium text-slate-700 dark:text-slate-300"}," Javobingiz ",-1)),t("textarea",{value:typeof r.value[a.value.id]=="string"?r.value[a.value.id]:"",onInput:e[2]||(e[2]=s=>D(a.value.id,s.target.value)),rows:"5",class:"w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900/40 p-4 text-slate-900 dark:text-slate-100 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Javobni yozing..."},null,40,lt),t("div",st,i(typeof r.value[a.value.id]=="string"?r.value[a.value.id].trim().length:0)+" ta belgi ",1)])):(d(),o("div",at,[e[18]||(e[18]=k(" Bu test turi qo‘llab-quvvatlanmaydi: ",-1)),t("b",null,i(a.value.type),1)])),t("div",rt,[t("button",{onClick:V,disabled:u.value===0,class:g(["inline-flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all",{"bg-slate-100 dark:bg-slate-700 text-slate-400 dark:text-slate-500 cursor-not-allowed":u.value===0,"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600":u.value>0}])},[...e[19]||(e[19]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})],-1),k(" Oldingi ",-1)])],10,ot),u.value<m.value-1?(d(),o("button",{key:0,onClick:H,class:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700 transition-all"},[...e[20]||(e[20]=[k(" Keyingi ",-1),t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1)])])):(d(),o("button",{key:1,onClick:q,disabled:b.value||!_.value,class:g(["inline-flex items-center gap-2 px-6 py-2 rounded-lg font-medium transition-all",b.value||!_.value?"bg-emerald-600/70 text-white cursor-not-allowed":"bg-emerald-600 text-white hover:bg-emerald-700"])},[b.value?(d(),o("svg",nt,[...e[22]||(e[22]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):(d(),o("svg",it,[...e[21]||(e[21]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0 9 9 0 0118 0z"},null,-1)])])),k(" "+i(b.value?"Yuborilmoqda...":"Testni yakunlash"),1)],10,dt))])])):(d(),o("div",ut,[...e[23]||(e[23]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-16 h-16 mx-auto text-slate-400 dark:text-slate-600 mb-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"})],-1),t("h3",{class:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-2"}," Testlar topilmadi ",-1),t("p",{class:"text-slate-500 dark:text-slate-400"}," Ushbu modul uchun hozircha faol testlar mavjud emas. ",-1)])]))])])])]),_:1})],64))}});export{wt as default};
