import{d as j,c as o,a as k,u as h,h as T,w as U,b as t,p as N,g as v,e as g,n as f,q as x,o as r,t as i,j as d,F as p,f as y,v as _,k as w,r as b}from"./app-CREx0BoJ.js";import{_ as Y}from"./AppLayout.vue_vue_type_script_setup_true_lang-l-9x1nZv.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-D3kVzRsV.js";import"./createLucideIcon-BRDuroAc.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CCqsnRBo.js";import"./useForwardPropsEmits-0uPZhPr6.js";import"./VisuallyHidden-DYgCmAo3.js";import"./index-CbeFPr6t.js";import"./useForwardExpose-yIfDWvrY.js";import"./index-8hKDQZPy.js";const q={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},F={class:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm p-6 max-w-2xl"},E={key:0,class:"mt-1 text-sm text-red-500"},K=["value"],$={key:0,class:"mt-1 text-sm text-red-500"},z={for:"value",class:"block text-sm font-medium text-slate-900 dark:text-slate-100 mb-2"},D={key:0,class:"text-xs font-normal text-slate-500 dark:text-slate-400"},Q=["disabled"],R={value:null,disabled:""},A=["value"],L={key:0,class:"mt-1 text-sm text-red-500"},O={key:1,class:"mt-1 text-sm text-amber-500"},G={key:0,class:"mt-1 text-sm text-red-500"},H={key:0,class:"mt-1 text-sm text-red-500"},J={class:"flex gap-3 pt-4"},P=["disabled"],W={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-4 mr-2 animate-spin"},ie=j({__name:"Create",props:{modules:{}},setup(C){const V=[{title:"Result Categories",href:"/result-categories"},{title:"Yangi Kategoriya",href:"/result-categories/create"}],l=b({name:"",diagnostic:"",fake_diagnostic:"",value:null,module_id:null}),s=b({}),n=b(!1),u=b([]),m=b(!1),M=async c=>{if(!c){u.value=[];return}m.value=!0;try{const a=await(await fetch(`/api/modules/${c}/test-options`)).json();u.value=a}catch(e){console.error("Error fetching test options:",e),u.value=[]}finally{m.value=!1}},S=()=>{l.value.module_id&&M(l.value.module_id),l.value.value=null},B=()=>{n.value=!0,s.value={},w.post("/result-categories",l.value,{onError:c=>{s.value=c,n.value=!1},onFinish:()=>{n.value=!1}})};return(c,e)=>(r(),o(p,null,[k(h(T),{title:"Yangi Result Category"}),k(Y,{breadcrumbs:V},{default:U(()=>[t("div",q,[e[13]||(e[13]=t("div",null,[t("h1",{class:"text-2xl font-bold text-slate-900 dark:text-slate-100"}," Yangi Kategoriya Yaratish "),t("p",{class:"mt-1 text-sm text-slate-600 dark:text-slate-400"}," Test natijalari uchun yangi kategoriya yarating ")],-1)),t("div",F,[t("form",{onSubmit:N(B,["prevent"]),class:"space-y-6"},[t("div",null,[e[6]||(e[6]=t("label",{for:"name",class:"block text-sm font-medium text-slate-900 dark:text-slate-100 mb-2"},[v(" Kategoriya Nomi "),t("span",{class:"text-red-500"},"*")],-1)),g(t("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=a=>l.value.name=a),type:"text",placeholder:"Masalan: A-grumli, B-normal",class:f(["w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":s.value.name}])},null,2),[[x,l.value.name]]),s.value.name?(r(),o("p",E,i(s.value.name),1)):d("",!0)]),t("div",null,[e[8]||(e[8]=t("label",{for:"module",class:"block text-sm font-medium text-slate-900 dark:text-slate-100 mb-2"},[v(" Modul "),t("span",{class:"text-red-500"},"*")],-1)),g(t("select",{id:"module","onUpdate:modelValue":e[1]||(e[1]=a=>l.value.module_id=a),onChange:S,class:f(["w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":s.value.module_id}])},[e[7]||(e[7]=t("option",{value:null,disabled:""},"Modulni tanlang",-1)),(r(!0),o(p,null,y(C.modules,a=>(r(),o("option",{key:a.id,value:a.id},i(a.name),9,K))),128))],34),[[_,l.value.module_id,void 0,{number:!0}]]),s.value.module_id?(r(),o("p",$,i(s.value.module_id),1)):d("",!0)]),t("div",null,[t("label",z,[e[9]||(e[9]=v(" Qiymat ",-1)),l.value.module_id?(r(),o("span",D,"(test variantlaridan)")):d("",!0)]),g(t("select",{id:"value","onUpdate:modelValue":e[2]||(e[2]=a=>l.value.value=a),disabled:!l.value.module_id||m.value,class:f(["w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",{"border-red-500":s.value.value}])},[t("option",R,i(m.value?"Yuklashda...":"Qiymatni tanlang"),1),(r(!0),o(p,null,y(u.value,a=>(r(),o("option",{key:a,value:a},i(a),9,A))),128))],10,Q),[[_,l.value.value,void 0,{number:!0}]]),s.value.value?(r(),o("p",L,i(s.value.value),1)):d("",!0),l.value.module_id&&u.value.length===0&&!m.value?(r(),o("p",O," Ushbu modulda test variantlari topilmadi ")):d("",!0)]),t("div",null,[e[10]||(e[10]=t("label",{for:"diagnostic",class:"block text-sm font-medium text-slate-900 dark:text-slate-100 mb-2"}," Tashxis ",-1)),g(t("textarea",{id:"diagnostic","onUpdate:modelValue":e[3]||(e[3]=a=>l.value.diagnostic=a),rows:"4",placeholder:"Bu kategoriyaning tashxisini kiriting",class:f(["w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":s.value.diagnostic}])},null,2),[[x,l.value.diagnostic]]),s.value.diagnostic?(r(),o("p",G,i(s.value.diagnostic),1)):d("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{for:"fake_diagnostic",class:"block text-sm font-medium text-slate-900 dark:text-slate-100 mb-2"}," Soxta Tashxis ",-1)),g(t("textarea",{id:"fake_diagnostic","onUpdate:modelValue":e[4]||(e[4]=a=>l.value.fake_diagnostic=a),rows:"4",placeholder:"Soxta tashxisni kiriting",class:f(["w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":s.value.fake_diagnostic}])},null,2),[[x,l.value.fake_diagnostic]]),s.value.fake_diagnostic?(r(),o("p",H,i(s.value.fake_diagnostic),1)):d("",!0)]),t("div",J,[t("button",{type:"submit",disabled:n.value,class:"inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-600 dark:hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[n.value?(r(),o("svg",W,[...e[12]||(e[12]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.995-1.465"},null,-1)])])):d("",!0),v(" "+i(n.value?"Saqlashda...":"Saqlash"),1)],8,P),t("button",{type:"button",onClick:e[5]||(e[5]=a=>h(w).visit("/result-categories")),class:"inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2 dark:focus:ring-offset-slate-900 transition-colors"}," Bekor qilish ")])],32)])])]),_:1})],64))}});export{ie as default};
