import{d as K,p as O,c as o,a as S,u as E,h as I,w as P,b as e,t as i,q as R,s as x,o as d,g as m,F as k,l as w,k as y,r as _,x as g,n as U,y as G}from"./app-hQW8f0hG.js";import{_ as W}from"./AppStudentLayout.vue_vue_type_script_setup_true_lang-DJZ9V6n2.js";import{d as X,s as Z}from"./index-4NV0h_2F.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-CHnYd7bW.js";import"./createLucideIcon-CEoz9ETH.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-9ZRIJKKM.js";import"./useForwardPropsEmits-BSdB0koY.js";import"./VisuallyHidden-CLcPe2kl.js";import"./index-DmNBYN3C.js";import"./useForwardExpose-C87Ekvm_.js";const ee={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},te={class:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm p-6"},le={class:"flex items-start justify-between gap-4"},se={class:"text-2xl font-bold text-slate-900 dark:text-slate-100"},ae={class:"text-sm text-slate-500 dark:text-slate-400 mt-1"},re={class:"text-right"},oe={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},de={class:"mt-4"},ie={class:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2"},ne={class:"mt-4 flex items-center justify-between gap-3"},ue={class:"text-xs text-slate-500 dark:text-slate-400"},ve=["disabled"],ce={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},be={key:1,class:"w-5 h-5 animate-spin",viewBox:"0 0 24 24",fill:"none"},me={key:0,class:"rounded-2xl border border-emerald-200 dark:border-emerald-800 bg-emerald-50 dark:bg-emerald-900/20 shadow-sm p-6"},xe={class:"flex items-start justify-between gap-4"},ge={class:"mt-4 space-y-3"},ke={class:"flex items-start justify-between gap-3"},he={class:"text-sm font-medium text-slate-900 dark:text-slate-100"},fe=["onClick"],pe={class:"mt-2 text-sm text-slate-700 dark:text-slate-300"},we={class:"grid grid-cols-1 lg:grid-cols-4 gap-4"},ye={class:"lg:col-span-1"},_e={class:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm p-4"},Ce={class:"grid grid-cols-5 lg:grid-cols-4 gap-2"},Ae=["onClick"],je={class:"lg:col-span-3"},qe={key:0,class:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm p-6"},ze={class:"mb-6"},Be={class:"flex items-start gap-3"},Te={class:"flex-shrink-0 flex h-8 w-8 items-center justify-center rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 font-semibold"},Me={class:"flex-1"},$e={class:"text-xl font-semibold text-slate-900 dark:text-slate-100"},Se={key:0,class:"mt-4"},Le=["src","alt"],Ne={class:"mt-2"},Fe={class:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300"},He={key:0,class:"space-y-3"},Je=["onClick"],Qe={class:"flex items-center gap-3"},Ve={key:0,class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},Ye={class:"text-slate-900 dark:text-slate-100"},De={key:1,class:"space-y-3"},Ke=["onClick"],Oe={class:"flex items-center gap-3"},Ee={key:0,class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},Ie={class:"text-slate-900 dark:text-slate-100"},Pe={class:"text-xs text-slate-500 dark:text-slate-400"},Re={class:"font-medium text-slate-700 dark:text-slate-200"},Ue={key:2,class:"space-y-3"},Ge=["value"],We={class:"text-xs text-slate-500 dark:text-slate-400"},Xe={key:3,class:"rounded-xl border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/20 p-4 text-sm text-amber-900 dark:text-amber-200"},Ze={class:"flex items-center justify-between mt-8 pt-6 border-t border-slate-200 dark:border-slate-700"},et=["disabled"],tt=["disabled"],lt={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},st={key:1,class:"w-5 h-5 animate-spin",viewBox:"0 0 24 24",fill:"none"},at={key:1,class:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm p-12 text-center"},xt=K({__name:"TakeTest",props:{module:{}},setup(C){const A=C,T=G(),L=[{title:"Student Dashboard",href:X().url},{title:"Tests",href:Z().url},{title:A.module.name,href:"#"}],n=_(0),r=_({}),v=_(!1),j=_(!1),c=g(()=>A.module.tests||[]),b=g(()=>c.value.length),s=g(()=>c.value.length&&c.value[n.value]||null),q=g(()=>{let l=0;for(const t of c.value){const a=r.value[t.id];t.type==="single"?typeof a=="number"&&l++:t.type==="multi"?Array.isArray(a)&&a.length>0&&l++:t.type==="text"&&typeof a=="string"&&a.trim().length>0&&l++}return l}),N=g(()=>b.value?q.value/b.value*100:0),z=g(()=>T.props.flash?.results??T.props.results??null);O(z,l=>{l&&(j.value=!0)});const B=l=>{const t=r.value[l.id];return l.type==="single"?typeof t=="number":l.type==="multi"?Array.isArray(t)&&t.length>0:l.type==="text"?typeof t=="string"&&t.trim().length>0:!1},F=g(()=>s.value?B(s.value):!1),M=l=>{l.id in r.value||(l.type==="single"&&(r.value[l.id]=null),l.type==="multi"&&(r.value[l.id]=[]),l.type==="text"&&(r.value[l.id]=""))},h=l=>{if(l<0||l>=b.value)return;n.value=l;const t=c.value[l];t&&M(t)},H=l=>{if(l==="single")return"Faqat 1 ta tanlov";if(l==="multi")return"Bir nechta tanlov qilish mumkin";if(l==="text")return"Faqat matn yozish mumkin"},J=()=>{n.value<b.value-1&&h(n.value+1)},Q=()=>{n.value>0&&h(n.value-1)},V=(l,t)=>{r.value[l]=t},Y=(l,t)=>{const a=r.value[l],u=Array.isArray(a)?[...a]:[],p=u.indexOf(t);p>=0?u.splice(p,1):u.push(t),r.value[l]=u},D=(l,t)=>{r.value[l]=t},$=()=>{v.value=!0;const l={};for(const t of c.value)l[t.id]=r.value[t.id]??(t.type==="multi"?[]:null);U.post(`/student/tests/${A.module.id}/submit`,{answers:l},{preserveScroll:!0,onFinish:()=>{v.value=!1}})},f=g(()=>b.value===0?!1:q.value===b.value);return c.value[0]&&M(c.value[0]),(l,t)=>(d(),o(k,null,[S(E(I),{title:`Test: ${C.module.name}`},null,8,["title"]),S(W,{breadcrumbs:L},{default:P(()=>[e("div",ee,[e("div",te,[e("div",le,[e("div",null,[e("h2",se,i(C.module.name),1),e("p",ae," Savol "+i(b.value?n.value+1:0)+" / "+i(b.value),1)]),e("div",re,[t[2]||(t[2]=e("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"Javob berilgan",-1)),e("p",oe,i(q.value)+" / "+i(b.value),1)])]),e("div",de,[e("div",ie,[e("div",{class:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:R({width:`${N.value}%`})},null,4)]),e("div",ne,[e("div",ue,i(F.value?"Bu savolga javob berilgan":"Hali javob berilmagan"),1),e("button",{onClick:$,disabled:v.value||!f.value,class:x(["inline-flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all",v.value||!f.value?"bg-emerald-600/70 text-white cursor-not-allowed":"bg-emerald-600 text-white hover:bg-emerald-700"])},[v.value?(d(),o("svg",be,[...t[4]||(t[4]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):(d(),o("svg",ce,[...t[3]||(t[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])),m(" "+i(v.value?"Yuborilmoqda...":"Testni yakunlash"),1)],10,ve)])])]),j.value&&z.value?(d(),o("div",me,[e("div",xe,[t[5]||(t[5]=e("div",null,[e("h3",{class:"text-xl font-semibold text-emerald-900 dark:text-emerald-200"}," Natijalar (consequence_fake) "),e("p",{class:"text-sm text-emerald-800/70 dark:text-emerald-200/70 mt-1"}," consequence_real ni keyin psixolog beradi. ")],-1)),e("button",{class:"px-3 py-2 rounded-lg bg-white/70 dark:bg-slate-800 border border-emerald-200 dark:border-emerald-800 text-sm text-slate-700 dark:text-slate-200 hover:bg-white dark:hover:bg-slate-700 transition",onClick:t[0]||(t[0]=a=>j.value=!1)}," Yopish ")]),e("div",ge,[(d(!0),o(k,null,w(c.value,(a,u)=>(d(),o("div",{key:a.id,class:"rounded-xl border border-emerald-200 dark:border-emerald-800 bg-white dark:bg-slate-900/30 p-4"},[e("div",ke,[e("div",he,i(u+1)+". "+i(a.question),1),e("button",{class:"text-xs px-2 py-1 rounded-md border border-emerald-200 dark:border-emerald-800 text-emerald-700 dark:text-emerald-300 hover:bg-emerald-100/60 dark:hover:bg-emerald-900/30 transition",onClick:p=>h(u)}," Ko‘rish ",8,fe)]),e("div",pe,i(z.value[a.id]?.consequence_fake??"Natija yo‘q"),1)]))),128))])])):y("",!0),e("div",we,[e("div",ye,[e("div",_e,[t[6]||(t[6]=e("h3",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4"},"Savollar",-1)),e("div",Ce,[(d(!0),o(k,null,w(c.value,(a,u)=>(d(),o("button",{key:a.id,onClick:p=>h(u),class:x(["aspect-square rounded-lg text-sm font-medium transition-all",{"bg-blue-600 text-white":n.value===u,"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400":n.value!==u&&B(a),"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300":n.value!==u&&!B(a)}])},i(u+1),11,Ae))),128))]),t[7]||(t[7]=e("div",{class:"mt-4 text-xs text-slate-500 dark:text-slate-400 space-y-1"},[e("div",{class:"flex items-center gap-2"},[e("span",{class:"inline-block w-3 h-3 rounded bg-blue-600"}),m(),e("span",null,"Hozirgi savol")]),e("div",{class:"flex items-center gap-2"},[e("span",{class:"inline-block w-3 h-3 rounded bg-emerald-200 dark:bg-emerald-900/30"}),m(),e("span",null,"Javob berilgan")]),e("div",{class:"flex items-center gap-2"},[e("span",{class:"inline-block w-3 h-3 rounded bg-slate-200 dark:bg-slate-700"}),m(),e("span",null,"Javobsiz")])],-1))])]),e("div",je,[s.value?(d(),o("div",qe,[e("div",ze,[e("div",Be,[e("span",Te,i(n.value+1),1),e("div",Me,[e("h3",$e,i(s.value.question),1),s.value.image?(d(),o("div",Se,[e("img",{src:`/storage/${s.value.image}`,alt:s.value.question,class:"rounded-lg max-w-full h-auto border border-slate-200 dark:border-slate-700"},null,8,Le)])):y("",!0),e("div",Ne,[e("span",Fe," Tanlov: "+i(H(s.value.type)),1)])])])]),s.value.type==="single"?(d(),o("div",He,[(d(!0),o(k,null,w(s.value.options||[],a=>(d(),o("button",{key:a.id,onClick:u=>V(s.value.id,a.id),class:x(["w-full text-left p-4 rounded-xl border-2 transition-all",{"border-blue-600 bg-blue-50 dark:bg-blue-900/20":r.value[s.value.id]===a.id,"border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-700":r.value[s.value.id]!==a.id}])},[e("div",Qe,[e("div",{class:x(["flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center",{"border-blue-600 bg-blue-600":r.value[s.value.id]===a.id,"border-slate-300 dark:border-slate-600":r.value[s.value.id]!==a.id}])},[r.value[s.value.id]===a.id?(d(),o("svg",Ve,[...t[8]||(t[8]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):y("",!0)],2),e("span",Ye,i(a.option_text),1)])],10,Je))),128))])):s.value.type==="multi"?(d(),o("div",De,[(d(!0),o(k,null,w(s.value.options||[],a=>(d(),o("button",{key:a.id,onClick:u=>Y(s.value.id,a.id),class:x(["w-full text-left p-4 rounded-xl border-2 transition-all",{"border-blue-600 bg-blue-50 dark:bg-blue-900/20":Array.isArray(r.value[s.value.id])&&r.value[s.value.id].includes(a.id),"border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-700":!(Array.isArray(r.value[s.value.id])&&r.value[s.value.id].includes(a.id))}])},[e("div",Oe,[e("div",{class:x(["flex-shrink-0 w-6 h-6 rounded-md border-2 flex items-center justify-center",{"border-blue-600 bg-blue-600":Array.isArray(r.value[s.value.id])&&r.value[s.value.id].includes(a.id),"border-slate-300 dark:border-slate-600":!(Array.isArray(r.value[s.value.id])&&r.value[s.value.id].includes(a.id))}])},[Array.isArray(r.value[s.value.id])&&r.value[s.value.id].includes(a.id)?(d(),o("svg",Ee,[...t[9]||(t[9]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):y("",!0)],2),e("span",Ie,i(a.option_text),1)])],10,Ke))),128)),e("div",Pe,[t[10]||(t[10]=m(" Tanlanganlar: ",-1)),e("span",Re,i(Array.isArray(r.value[s.value.id])?r.value[s.value.id].length:0),1)])])):s.value.type==="text"?(d(),o("div",Ue,[t[11]||(t[11]=e("label",{class:"text-sm font-medium text-slate-700 dark:text-slate-300"}," Javobingiz ",-1)),e("textarea",{value:typeof r.value[s.value.id]=="string"?r.value[s.value.id]:"",onInput:t[1]||(t[1]=a=>D(s.value.id,a.target.value)),rows:"5",class:"w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900/40 p-4 text-slate-900 dark:text-slate-100 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Javobni yozing..."},null,40,Ge),e("div",We,i(typeof r.value[s.value.id]=="string"?r.value[s.value.id].trim().length:0)+" ta belgi ",1)])):(d(),o("div",Xe,[t[12]||(t[12]=m(" Bu test turi qo‘llab-quvvatlanmaydi: ",-1)),e("b",null,i(s.value.type),1)])),e("div",Ze,[e("button",{onClick:Q,disabled:n.value===0,class:x(["inline-flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all",{"bg-slate-100 dark:bg-slate-700 text-slate-400 dark:text-slate-500 cursor-not-allowed":n.value===0,"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600":n.value>0}])},[...t[13]||(t[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})],-1),m(" Oldingi ",-1)])],10,et),n.value<b.value-1?(d(),o("button",{key:0,onClick:J,class:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700 transition-all"},[...t[14]||(t[14]=[m(" Keyingi ",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1)])])):(d(),o("button",{key:1,onClick:$,disabled:v.value||!f.value,class:x(["inline-flex items-center gap-2 px-6 py-2 rounded-lg font-medium transition-all",v.value||!f.value?"bg-emerald-600/70 text-white cursor-not-allowed":"bg-emerald-600 text-white hover:bg-emerald-700"])},[v.value?(d(),o("svg",st,[...t[16]||(t[16]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):(d(),o("svg",lt,[...t[15]||(t[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0 9 9 0 0118 0z"},null,-1)])])),m(" "+i(v.value?"Yuborilmoqda...":"Testni yakunlash"),1)],10,tt))])])):(d(),o("div",at,[...t[17]||(t[17]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-16 h-16 mx-auto text-slate-400 dark:text-slate-600 mb-4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"})],-1),e("h3",{class:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-2"}," Testlar topilmadi ",-1),e("p",{class:"text-slate-500 dark:text-slate-400"}," Ushbu modul uchun hozircha faol testlar mavjud emas. ",-1)])]))])])])]),_:1})],64))}});export{xt as default};
