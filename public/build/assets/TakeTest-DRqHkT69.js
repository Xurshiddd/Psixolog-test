import{d as D,x as E,c as o,a as S,u as K,h as O,w as I,b as e,t as i,E as P,n as g,o as d,f as k,g as h,F as p,r as j,i as A,A as x,p as U,C as G}from"./app-ColnGB-H.js";import{_ as W}from"./AppStudentLayout.vue_vue_type_script_setup_true_lang-p9Tj-r5K.js";import{d as X,s as Z}from"./index-8hKDQZPy.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-C613sREc.js";import"./createLucideIcon-BXtfdXhm.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Bp_enkft.js";import"./useForwardPropsEmits-DrYRqb0U.js";import"./VisuallyHidden-DM-fxMCC.js";import"./index-U6JCQeF4.js";import"./useForwardExpose-BJB0gE7e.js";const ee={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},te={class:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm p-6"},le={class:"flex items-start justify-between gap-4"},se={class:"text-2xl font-bold text-slate-900 dark:text-slate-100"},ae={class:"text-sm text-slate-500 dark:text-slate-400 mt-1"},re={class:"text-right"},oe={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},de={class:"mt-4"},ie={class:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2"},ne={class:"mt-4 flex items-center justify-between gap-3"},ue={class:"text-xs text-slate-500 dark:text-slate-400"},ve=["disabled"],be={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},ce={key:1,class:"w-5 h-5 animate-spin",viewBox:"0 0 24 24",fill:"none"},me={key:0,class:"rounded-2xl border border-emerald-200 dark:border-emerald-800 bg-emerald-50 dark:bg-emerald-900/20 shadow-sm p-6"},xe={class:"flex items-start justify-between gap-4"},ge={key:0,class:"text-sm font-medium text-emerald-700 dark:text-emerald-300 mt-2"},ke={key:1,class:"mt-4 p-4 rounded-xl bg-emerald-100/50 dark:bg-emerald-900/40 border border-emerald-200 dark:border-emerald-700"},he={class:"text-emerald-800 dark:text-emerald-200 text-lg"},fe={key:0,class:"mt-4 space-y-3"},pe={class:"flex items-start justify-between gap-3"},we={class:"text-sm font-medium text-slate-900 dark:text-slate-100"},ye=["onClick"],_e={class:"mt-2 text-sm text-slate-700 dark:text-slate-300"},Ce={class:"grid grid-cols-1 lg:grid-cols-4 gap-4"},je={class:"lg:col-span-1"},Ae={class:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm p-4"},ze={key:0,class:"grid grid-cols-5 lg:grid-cols-4 gap-2"},Me=["onClick"],Be={key:1,class:"text-sm text-slate-500 dark:text-slate-400"},Te={class:"lg:col-span-3"},qe={key:0,class:"rounded-2xl border border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20 shadow-sm p-8 text-center"},Se={key:1,class:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm p-6"},$e={class:"mb-6"},Ne={class:"flex items-start gap-3"},Le={class:"flex-shrink-0 flex h-8 w-8 items-center justify-center rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 font-semibold"},Re={class:"flex-1"},Fe={class:"text-xl font-semibold text-slate-900 dark:text-slate-100"},Qe={key:0,class:"mt-4"},He=["src","alt"],Ve={class:"mt-2"},Ye={class:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300"},Je={key:0,class:"space-y-3"},De=["onClick"],Ee={class:"flex items-center gap-3"},Ke={key:0,class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},Oe={class:"text-slate-900 dark:text-slate-100"},Ie={key:1,class:"space-y-3"},Pe=["onClick"],Ue={class:"flex items-center gap-3"},Ge={key:0,class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},We={class:"text-slate-900 dark:text-slate-100"},Xe={class:"text-xs text-slate-500 dark:text-slate-400"},Ze={class:"font-medium text-slate-700 dark:text-slate-200"},et={key:2,class:"space-y-3"},tt=["value"],lt={class:"text-xs text-slate-500 dark:text-slate-400"},st={key:3,class:"rounded-xl border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/20 p-4 text-sm text-amber-900 dark:text-amber-200"},at={class:"flex items-center justify-between mt-8 pt-6 border-t border-slate-200 dark:border-slate-700"},rt=["disabled"],ot=["disabled"],dt={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},it={key:1,class:"w-5 h-5 animate-spin",viewBox:"0 0 24 24",fill:"none"},nt={key:2,class:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm p-12 text-center"},pt=D({__name:"TakeTest",props:{module:{},existingResult:{}},setup(v){const $=G(),N=[{title:"Student Dashboard",href:X().url},{title:"Tests",href:Z().url},{title:v.module.name,href:"#"}],n=A(0),r=A({}),b=A(!1),w=A(!1),c=x(()=>v.module.tests||[]),m=x(()=>c.value.length),s=x(()=>c.value.length&&c.value[n.value]||null),z=x(()=>{let l=0;for(const t of c.value){const a=r.value[t.id];t.type==="single"?typeof a=="number"&&l++:t.type==="multi"?Array.isArray(a)&&a.length>0&&l++:t.type==="text"&&typeof a=="string"&&a.trim().length>0&&l++}return l}),L=x(()=>m.value?z.value/m.value*100:0),f=x(()=>$.props.flash||{}),M=x(()=>f.value.results??null);E(()=>f.value,l=>{(l?.status==="success"||l?.results)&&(w.value=!0)},{deep:!0,immediate:!0});const B=l=>{const t=r.value[l.id];return l.type==="single"?typeof t=="number":l.type==="multi"?Array.isArray(t)&&t.length>0:l.type==="text"?typeof t=="string"&&t.trim().length>0:!1},R=x(()=>s.value?B(s.value):!1),T=l=>{l.id in r.value||(l.type==="single"&&(r.value[l.id]=null),l.type==="multi"&&(r.value[l.id]=[]),l.type==="text"&&(r.value[l.id]=""))},y=l=>{if(l<0||l>=m.value)return;n.value=l;const t=c.value[l];t&&T(t)},F=l=>l==="single"?"Faqat 1 ta tanlov":l==="multi"?"Bir nechta tanlov qilish mumkin":"Faqat matn yozish mumkin",Q=()=>{n.value<m.value-1&&y(n.value+1)},H=()=>{n.value>0&&y(n.value-1)},V=(l,t)=>{r.value[l]=t},Y=(l,t)=>{const a=r.value[l],u=Array.isArray(a)?[...a]:[],C=u.indexOf(t);C>=0?u.splice(C,1):u.push(t),r.value[l]=u},J=(l,t)=>{r.value[l]=t},q=()=>{b.value=!0;const l={};for(const t of c.value)l[t.id]=r.value[t.id]??(t.type==="multi"?[]:null);U.post("/student/test/solve",{module_id:v.module.id,answers:l},{preserveScroll:!0,onFinish:()=>{b.value=!1}})},_=x(()=>m.value===0?!1:z.value===m.value);return c.value[0]&&T(c.value[0]),(l,t)=>(d(),o(p,null,[S(K(O),{title:`Test: ${v.module.name}`},null,8,["title"]),S(W,{breadcrumbs:N},{default:I(()=>[e("div",ee,[e("div",te,[e("div",le,[e("div",null,[e("h2",se,i(v.module.name),1),e("p",ae," Savol "+i(m.value?n.value+1:0)+" / "+i(m.value),1)]),e("div",re,[t[3]||(t[3]=e("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"Javob berilgan",-1)),e("p",oe,i(z.value)+" / "+i(m.value),1)])]),e("div",de,[e("div",ie,[e("div",{class:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:P({width:`${L.value}%`})},null,4)]),e("div",ne,[e("div",ue,i(R.value?"Bu savolga javob berilgan":"Hali javob berilmagan"),1),e("button",{onClick:q,disabled:b.value||!_.value,class:g(["inline-flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all",b.value||!_.value?"bg-emerald-600/70 text-white cursor-not-allowed":"bg-emerald-600 text-white hover:bg-emerald-700"])},[b.value?(d(),o("svg",ce,[...t[5]||(t[5]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):(d(),o("svg",be,[...t[4]||(t[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])),k(" "+i(b.value?"Yuborilmoqda...":"Testni yakunlash"),1)],10,ve)])])]),w.value&&(M.value||f.value.status==="success"||v.existingResult)?(d(),o("div",me,[e("div",xe,[e("div",null,[t[7]||(t[7]=e("h3",{class:"text-xl font-semibold text-emerald-900 dark:text-emerald-200"}," Natijalar: ",-1)),t[8]||(t[8]=e("p",{class:"text-sm text-emerald-800/70 dark:text-emerald-200/70 mt-1"}," Asosiy dianostika psiholog tomonidan amalga oshirildi. ",-1)),f.value.message?(d(),o("div",ge,i(f.value.message),1)):h("",!0),v.existingResult?(d(),o("div",ke,[t[6]||(t[6]=e("h4",{class:"text-lg font-bold text-emerald-900 dark:text-emerald-100 mb-2"},"Sizning Natijangiz:",-1)),e("p",he,i(v.existingResult.result_fake),1)])):h("",!0)]),e("button",{class:"px-3 py-2 rounded-lg bg-white/70 dark:bg-slate-800 border border-emerald-200 dark:border-emerald-800 text-sm text-slate-700 dark:text-slate-200 hover:bg-white dark:hover:bg-slate-700 transition",onClick:t[0]||(t[0]=a=>w.value=!1)}," Yopish ")]),M.value?(d(),o("div",fe,[(d(!0),o(p,null,j(c.value,(a,u)=>(d(),o("div",{key:a.id,class:"rounded-xl border border-emerald-200 dark:border-emerald-800 bg-white dark:bg-slate-900/30 p-4"},[e("div",pe,[e("div",we,i(u+1)+". "+i(a.question),1),e("button",{class:"text-xs px-2 py-1 rounded-md border border-emerald-200 dark:border-emerald-800 text-emerald-700 dark:text-emerald-300 hover:bg-emerald-100/60 dark:hover:bg-emerald-900/30 transition",onClick:C=>y(u)}," Ko‘rish ",8,ye)]),e("div",_e,i(M.value[a.id]?.consequence_fake??"Natija yo‘q"),1)]))),128))])):h("",!0)])):h("",!0),e("div",Ce,[e("div",je,[e("div",Ae,[t[9]||(t[9]=e("h3",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4"},"Savollar",-1)),v.existingResult?(d(),o("div",Be," Test yakunlangan. ")):(d(),o("div",ze,[(d(!0),o(p,null,j(c.value,(a,u)=>(d(),o("button",{key:a.id,onClick:C=>y(u),class:g(["aspect-square rounded-lg text-sm font-medium transition-all",{"bg-blue-600 text-white":n.value===u,"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400":n.value!==u&&B(a),"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300":n.value!==u&&!B(a)}])},i(u+1),11,Me))),128))]))])]),e("div",Te,[v.existingResult?(d(),o("div",qe,[t[11]||(t[11]=e("div",{class:"w-16 h-16 mx-auto bg-blue-100 dark:bg-blue-800 rounded-full flex items-center justify-center mb-4"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-8 h-8 text-blue-600 dark:text-blue-300"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t[12]||(t[12]=e("h2",{class:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2"},"Test Yakunlangan",-1)),t[13]||(t[13]=e("p",{class:"text-slate-600 dark:text-slate-400 mb-6"}," Siz ushbu testni muvaffaqiyatli yakunlagansiz. ",-1)),e("button",{onClick:t[1]||(t[1]=a=>w.value=!0),class:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-all shadow-md hover:shadow-lg"},[...t[10]||(t[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1),k(" Natijani ko‘rish ",-1)])])])):s.value?(d(),o("div",Se,[e("div",$e,[e("div",Ne,[e("span",Le,i(n.value+1),1),e("div",Re,[e("h3",Fe,i(s.value.question),1),s.value.image?(d(),o("div",Qe,[e("img",{src:`/storage/${s.value.image}`,alt:s.value.question,class:"rounded-lg max-w-full h-auto border border-slate-200 dark:border-slate-700"},null,8,He)])):h("",!0),e("div",Ve,[e("span",Ye," Tanlov: "+i(F(s.value.type)),1)])])])]),s.value.type==="single"?(d(),o("div",Je,[(d(!0),o(p,null,j(s.value.options||[],a=>(d(),o("button",{key:a.id,onClick:u=>V(s.value.id,a.id),class:g(["w-full text-left p-4 rounded-xl border-2 transition-all",{"border-blue-600 bg-blue-50 dark:bg-blue-900/20":r.value[s.value.id]===a.id,"border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-700":r.value[s.value.id]!==a.id}])},[e("div",Ee,[e("div",{class:g(["flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center",{"border-blue-600 bg-blue-600":r.value[s.value.id]===a.id,"border-slate-300 dark:border-slate-600":r.value[s.value.id]!==a.id}])},[r.value[s.value.id]===a.id?(d(),o("svg",Ke,[...t[14]||(t[14]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):h("",!0)],2),e("span",Oe,i(a.option_text),1)])],10,De))),128))])):s.value.type==="multi"?(d(),o("div",Ie,[(d(!0),o(p,null,j(s.value.options||[],a=>(d(),o("button",{key:a.id,onClick:u=>Y(s.value.id,a.id),class:g(["w-full text-left p-4 rounded-xl border-2 transition-all",{"border-blue-600 bg-blue-50 dark:bg-blue-900/20":Array.isArray(r.value[s.value.id])&&r.value[s.value.id].includes(a.id),"border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-700":!(Array.isArray(r.value[s.value.id])&&r.value[s.value.id].includes(a.id))}])},[e("div",Ue,[e("div",{class:g(["flex-shrink-0 w-6 h-6 rounded-md border-2 flex items-center justify-center",{"border-blue-600 bg-blue-600":Array.isArray(r.value[s.value.id])&&r.value[s.value.id].includes(a.id),"border-slate-300 dark:border-slate-600":!(Array.isArray(r.value[s.value.id])&&r.value[s.value.id].includes(a.id))}])},[Array.isArray(r.value[s.value.id])&&r.value[s.value.id].includes(a.id)?(d(),o("svg",Ge,[...t[15]||(t[15]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):h("",!0)],2),e("span",We,i(a.option_text),1)])],10,Pe))),128)),e("div",Xe,[t[16]||(t[16]=k(" Tanlanganlar: ",-1)),e("span",Ze,i(Array.isArray(r.value[s.value.id])?r.value[s.value.id].length:0),1)])])):s.value.type==="text"?(d(),o("div",et,[t[17]||(t[17]=e("label",{class:"text-sm font-medium text-slate-700 dark:text-slate-300"}," Javobingiz ",-1)),e("textarea",{value:typeof r.value[s.value.id]=="string"?r.value[s.value.id]:"",onInput:t[2]||(t[2]=a=>J(s.value.id,a.target.value)),rows:"5",class:"w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900/40 p-4 text-slate-900 dark:text-slate-100 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Javobni yozing..."},null,40,tt),e("div",lt,i(typeof r.value[s.value.id]=="string"?r.value[s.value.id].trim().length:0)+" ta belgi ",1)])):(d(),o("div",st,[t[18]||(t[18]=k(" Bu test turi qo‘llab-quvvatlanmaydi: ",-1)),e("b",null,i(s.value.type),1)])),e("div",at,[e("button",{onClick:H,disabled:n.value===0,class:g(["inline-flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all",{"bg-slate-100 dark:bg-slate-700 text-slate-400 dark:text-slate-500 cursor-not-allowed":n.value===0,"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600":n.value>0}])},[...t[19]||(t[19]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})],-1),k(" Oldingi ",-1)])],10,rt),n.value<m.value-1?(d(),o("button",{key:0,onClick:Q,class:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700 transition-all"},[...t[20]||(t[20]=[k(" Keyingi ",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1)])])):(d(),o("button",{key:1,onClick:q,disabled:b.value||!_.value,class:g(["inline-flex items-center gap-2 px-6 py-2 rounded-lg font-medium transition-all",b.value||!_.value?"bg-emerald-600/70 text-white cursor-not-allowed":"bg-emerald-600 text-white hover:bg-emerald-700"])},[b.value?(d(),o("svg",it,[...t[22]||(t[22]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):(d(),o("svg",dt,[...t[21]||(t[21]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0 9 9 0 0118 0z"},null,-1)])])),k(" "+i(b.value?"Yuborilmoqda...":"Testni yakunlash"),1)],10,ot))])])):(d(),o("div",nt,[...t[23]||(t[23]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-16 h-16 mx-auto text-slate-400 dark:text-slate-600 mb-4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"})],-1),e("h3",{class:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-2"}," Testlar topilmadi ",-1),e("p",{class:"text-slate-500 dark:text-slate-400"}," Ushbu modul uchun hozircha faol testlar mavjud emas. ",-1)])]))])])])]),_:1})],64))}});export{pt as default};
