import{d as $,r as x,z as B,H as F,c as n,a as C,w as H,b as t,t as k,i as w,e as c,v as m,I,o as d,k as g,F as y,f as V,q as z,m as O}from"./app-d_SLbATm.js";import{_ as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-CXU4kjK5.js";import"./AppSidebarHeader.vue_vue_type_script_setup_true_lang-tjHStAc5.js";import"./createLucideIcon-Br_0eut1.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Di_IR-JN.js";import"./useForwardPropsEmits-5Fs5DwpC.js";import"./VisuallyHidden-DE7HSwfI.js";import"./index-DOJenu8j.js";import"./useForwardExpose-Bv2uQHJ9.js";import"./index-8hKDQZPy.js";const D={class:"min-h-screen bg-slate-50 dark:bg-slate-900"},Q={class:"mx-auto max-w-5xl px-4 py-10 sm:px-6 lg:px-8"},A={class:"mb-8"},E={class:"mt-1 text-sm text-slate-600 dark:text-slate-400"},J={class:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm"},Y={class:"px-6 py-6"},G={class:"grid grid-cols-1 gap-6"},K={class:"grid grid-cols-1 gap-4 sm:grid-cols-[1fr_auto] sm:items-end"},W={class:"flex items-center gap-3 sm:justify-end"},X={class:"mt-6 rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm"},Z={class:"flex flex-col gap-4 px-6 py-5 sm:flex-row sm:items-center sm:justify-between border-b border-slate-100 dark:border-slate-700"},ee={class:"flex flex-wrap gap-2"},te={class:"divide-y divide-slate-100"},se={key:0,class:"px-6 py-12 text-center"},le={class:"flex items-start justify-between gap-4 mb-4"},oe={class:"flex-1"},ae={class:"flex items-center gap-2 mb-2"},re={class:"text-sm font-medium text-slate-600 dark:text-slate-300"},ie={class:"flex items-center gap-2"},ne=["onClick"],de={class:"mb-4"},ue=["onUpdate:modelValue"],ce={class:"mb-4"},me={class:"flex items-center gap-3"},be=["onChange"],pe=["onClick"],xe={key:0,class:"mt-3"},ge=["src"],ve={key:0,class:"mt-6"},fe={class:"mb-4 flex items-center justify-between"},he=["onClick"],ke={class:"space-y-3"},we={class:"flex-1"},ye=["onUpdate:modelValue"],_e={class:"w-24"},Ce=["onUpdate:modelValue"],Ve=["onClick"],Be=$({__name:"EditTest",props:{module:{}},setup(j){const u=j,T=[{title:"Testlar",href:"/test/index"},{title:"Testni Tahrirlash",href:"#"}],v=x(!!u.module.shuffle),b=x(u.module.name),f=x(u.module.description||""),i=x([]);B(()=>{u.module.tests&&(i.value=u.module.tests.map(s=>({id:s.id,type:s.type,text:s.question,required:!0,reverseScoring:!1,options:s.options?s.options.map(e=>({id:e.id,label:e.option_text,value:e.option_value})):[],imageFile:null,imagePreview:s.image?"/storage/"+s.image:null,existingImage:s.image})))});const h=s=>{const e={type:s,text:"",required:!0,reverseScoring:!1,options:s!=="text"?[{label:"",value:1},{label:"",value:1}]:[],imageFile:null,imagePreview:null};i.value.push(e)},U=s=>{const e=i.value[s];if(e&&e.imagePreview&&!e.existingImage)try{URL.revokeObjectURL(e.imagePreview)}catch{}i.value.splice(s,1)},M=(s,e)=>{const o=e.target,l=o.files&&o.files[0]?o.files[0]:null,a=i.value[s];if(a){if(a.imagePreview&&!a.existingImage)try{URL.revokeObjectURL(a.imagePreview)}catch{}l&&(a.imageFile=l,a.imagePreview=URL.createObjectURL(l)),o&&(o.value="")}},P=s=>{const e=i.value[s];if(e){if(e.imagePreview&&!e.existingImage)try{URL.revokeObjectURL(e.imagePreview)}catch{}e.imageFile=null,e.imagePreview=null,e.existingImage=null}},S=s=>{const e=i.value[s];e&&e.options.push({label:"",value:1})},q=(s,e)=>{const o=i.value[s];o&&o.options.splice(e,1)},L=s=>({single:"Single",multi:"Multi",text:"Text"})[s],R=async()=>{const s=i.value.map(o=>({id:o.id,question:o.text,question_image:o.imageFile,type:o.type,options:o.options.map(l=>({id:l.id,option_text:l.label,option_value:l.value}))})),e={id:u.module.id,module:b.value,module_description:f.value,shuffle:v.value?1:0,questions:s};O.put(`/test/update/${u.module.id}`,e,{onSuccess:()=>{alert("Test muvaffaqiyatli yangilandi!")},onError:o=>{console.log(o),alert("Validatsiya xatosi bor")}})};return(s,e)=>{const o=F("Head");return d(),n(y,null,[C(o,{title:"Testni Tahrirlash"}),C(N,{breadcrumbs:T},{default:H(()=>[t("div",D,[t("div",Q,[t("div",A,[e[6]||(e[6]=t("h1",{class:"text-3xl font-semibold tracking-tight text-slate-900 dark:text-slate-100"}," Testni Tahrirlash ",-1)),t("p",E,k(b.value)+" testini o'zgartirish ",1)]),t("div",J,[e[10]||(e[10]=t("div",{class:"flex items-center gap-3 border-b border-slate-100 dark:border-slate-700 px-6 py-5"},[t("div",{class:"flex h-9 w-9 items-center justify-center rounded-xl bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200","aria-hidden":"true"},[t("svg",{viewBox:"0 0 24 24",fill:"none",class:"h-5 w-5",stroke:"currentColor","stroke-width":"1.8"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.607 2.296.07 2.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})])]),t("h2",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},"Test malumotlari")],-1)),t("div",Y,[t("div",G,[t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},[w(" Module nomi "),t("span",{class:"text-rose-600"},"*")],-1)),c(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>b.value=l),type:"text",placeholder:"Strees darajasini baholash",class:"mt-2 block w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-3 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none ring-0 transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,512),[[m,b.value]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Tavsif",-1)),c(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=l=>f.value=l),rows:"4",placeholder:"Test haqida qisqacha ma'lumot",class:"mt-2 block w-full resize-none rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-3 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,512),[[m,f.value]])]),t("div",K,[t("label",W,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=l=>v.value=l),class:"h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500/20"},null,512),[[I,v.value]]),e[9]||(e[9]=t("span",{class:"text-sm text-slate-700 dark:text-slate-300"},"Aralashtirish",-1))])])])])]),t("div",X,[t("div",Z,[e[11]||(e[11]=t("h2",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},"Savollar",-1)),t("div",ee,[t("button",{onClick:e[3]||(e[3]=l=>h("single")),type:"button",class:"rounded-xl bg-blue-600 px-3.5 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-600/20"}," + Single "),t("button",{onClick:e[4]||(e[4]=l=>h("multi")),type:"button",class:"rounded-xl bg-blue-600 px-3.5 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-600/20"}," + Multi "),t("button",{onClick:e[5]||(e[5]=l=>h("text")),type:"button",class:"rounded-xl bg-blue-600 px-3.5 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-600/20"}," + Text ")])]),t("div",te,[i.value.length===0?(d(),n("div",se,[...e[12]||(e[12]=[t("p",{class:"text-slate-500 dark:text-slate-400"},"Hali savollar qo'shilmagan. Yuqoridagi tugmalar orqali savollarni qo'shing",-1)])])):g("",!0),(d(!0),n(y,null,V(i.value,(l,a)=>(d(),n("div",{key:a,class:"px-6 py-6"},[t("div",le,[t("div",oe,[t("div",ae,[t("span",re,"Savol "+k(a+1)+" ("+k(L(l.type))+")",1)])]),t("div",ie,[t("button",{onClick:r=>U(a),type:"button",class:"rounded p-1 text-red-600 hover:bg-red-50 transition"},[...e[13]||(e[13]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ne)])]),t("div",de,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2 dark:text-slate-300"},[w("Savol matni "),t("span",{class:"text-rose-600"},"*")],-1)),c(t("input",{"onUpdate:modelValue":r=>l.text=r,type:"text",placeholder:"Savol matnini kiriting",class:"block w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-3 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,8,ue),[[m,l.text]])]),t("div",ce,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2 dark:text-slate-300"},"Rasm (ixtiyoriy)",-1)),t("div",me,[t("input",{onChange:r=>M(a,r),type:"file",accept:"image/*",class:"text-sm text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-700 rounded-xl px-3 py-2 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,40,be),l.imagePreview?(d(),n("button",{key:0,onClick:z(r=>P(a),["prevent"]),type:"button",class:"text-sm text-red-600 hover:underline transition border border-slate-200 dark:border-slate-700 rounded-xl px-3 py-2 bg-transparent"}," Rasmni olib tashlash ",8,pe)):g("",!0)]),l.imagePreview?(d(),n("div",xe,[t("img",{src:l.imagePreview,alt:"preview",class:"max-w-xs rounded-lg border border-slate-200 dark:border-slate-700"},null,8,ge)])):g("",!0)]),l.type!=="text"?(d(),n("div",ve,[t("div",fe,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Variantlar",-1)),t("button",{onClick:r=>S(a),type:"button",class:"text-sm font-medium text-blue-600 hover:text-blue-700 transition"}," + Variant ",8,he)]),t("div",ke,[(d(!0),n(y,null,V(l.options,(r,_)=>(d(),n("div",{key:_,class:"flex items-end gap-3"},[t("div",we,[c(t("input",{"onUpdate:modelValue":p=>r.label=p,type:"text",placeholder:"Variant",class:"block w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,8,ye),[[m,r.label]])]),t("div",_e,[c(t("input",{"onUpdate:modelValue":p=>r.value=p,type:"number",min:"1",placeholder:"1",class:"block w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-sm outline-none transition focus:border-blue-500 dark:focus:border-blue-400 focus:ring-4 focus:ring-blue-500/10"},null,8,Ce),[[m,r.value,void 0,{number:!0}]])]),t("button",{onClick:p=>q(a,_),type:"button",class:"rounded p-2 text-red-600 hover:bg-red-50 transition"},[...e[17]||(e[17]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ve)]))),128))])])):g("",!0)]))),128))])]),t("div",{class:"mt-8 flex justify-end"},[t("button",{onClick:R,type:"button",class:"inline-flex items-center justify-center gap-2 rounded-2xl bg-emerald-600 px-6 py-4 text-base font-semibold text-white shadow-sm transition hover:bg-emerald-700 focus:outline-none focus:ring-4 focus:ring-emerald-600/20"},[...e[18]||(e[18]=[t("svg",{viewBox:"0 0 24 24",fill:"none",class:"h-5 w-5",stroke:"currentColor","stroke-width":"1.8"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7a2 2 0 012-2h10l4 4v10a2 2 0 01-2 2H6a2 2 0 01-2-2V7z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 5v6h8V5"})],-1),w(" Saqlash ",-1)])])])])])]),_:1})],64)}}});export{Be as default};
